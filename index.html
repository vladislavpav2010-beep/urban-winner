<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Crash TON Ultimate</title>

<style>
:root {
    --bg:#07080a;--card:#121418;--blue:#0098ea;
    --green:#0ecb81;--red:#f6465d;--text-sec:#707a8a;--gold:#f3ba2f;
}
*{box-sizing:border-box;font-family:Inter,sans-serif;}
body{background:var(--bg);color:white;margin:0;height:100vh;display:flex;flex-direction:column;overflow:hidden}

/* HEADER */
.header{display:flex;justify-content:space-between;padding:12px 16px}
.online-count{background:#ffffff10;padding:5px 12px;border-radius:20px;color:var(--green);font-weight:800}
.balance-pill{background:#1e2329;padding:6px 14px;border-radius:50px;font-weight:800}

/* GAME */
.game-view{position:relative;height:260px;border-bottom:1px solid #1a1d23}
canvas{position:absolute;inset:0}
.multiplier-text{position:absolute;width:100%;top:35%;text-align:center;font-size:64px;font-weight:900}
.countdown-text{position:absolute;width:100%;top:30%;text-align:center;font-size:90px;font-weight:900}

.history-row{position:absolute;top:10px;left:10px;display:flex;gap:6px}
.h-tag{background:#1e2329;padding:4px 8px;border-radius:6px;font-size:12px}
.h-tag.high{color:var(--blue)}

/* TABS */
.tabs-nav{display:flex;background:var(--card);margin:12px;border-radius:12px;padding:4px}
.tab-item{flex:1;text-align:center;padding:10px;font-weight:800;color:var(--text-sec);cursor:pointer;border-radius:8px}
.tab-item.active{background:#1e2329;color:white}

/* BET PANEL */
.bet-panel{padding:0 16px 16px;display:flex;flex-direction:column;gap:10px}
.inputs-row{display:flex;gap:10px}
.input-box{flex:1;background:#1c1f24;border-radius:12px;padding:10px;border:1px solid #2a2e35}
.input-box label{font-size:10px;color:var(--text-sec);font-weight:800}
.input-box input{background:none;border:none;color:white;font-size:18px;font-weight:800;width:100%}

.btn-main{height:58px;border-radius:14px;border:none;font-size:18px;font-weight:900;background:var(--blue);color:white}
.btn-main.collect{background:var(--green)}
.btn-main:disabled{background:#1e2329;color:var(--text-sec)}

/* LIST */
.scroll-area{flex:1;overflow-y:auto;padding:0 16px}
.bet-card{background:var(--card);padding:12px;border-radius:14px;display:flex;justify-content:space-between;margin-bottom:8px}

/* BOTTOM */
.bottom-nav{background:#0c0d10;display:flex;padding:10px 0;border-top:1px solid #1a1d23}
.nav-btn{flex:1;text-align:center;color:var(--text-sec);font-size:10px;opacity:.6}
.nav-btn.active{color:var(--blue);opacity:1}

/* TOAST */
#win-toast{position:fixed;top:20px;left:50%;transform:translateX(-50%) translateY(-100px);
background:#1c1f24;padding:14px 24px;border-radius:14px;border:1px solid var(--green);
transition:.4s;z-index:999}
#win-toast.show{transform:translateX(-50%) translateY(0)}
</style>
</head>

<body>

<div id="win-toast"><b>–í—ã –∑–∞–±—Ä–∞–ª–∏: 0.00 TON</b></div>

<div class="header">
<div class="online-count">‚óè 124 –æ–Ω–ª–∞–π–Ω</div>
<div class="balance-pill">üíé <span id="userBalance">112.97</span></div>
</div>

<div class="game-view">
<div class="history-row" id="historyBox"></div>
<canvas id="gameCanvas"></canvas>
<div id="multiplier" class="multiplier-text">x1.00</div>
<div id="countdown" class="countdown-text">5</div>
</div>

<div class="tabs-nav">
<div class="tab-item active" onclick="setTab('bets')">–°–¢–ê–í–ö–ò</div>
<div class="tab-item" onclick="setTab('top')">–¢–û–ü</div>
<div class="tab-item" onclick="setTab('prof')">–ü–†–û–§–ò–õ–¨</div>
</div>

<div class="bet-panel">
<div class="inputs-row">
<div class="input-box"><label>–°–£–ú–ú–ê</label><input type="number" id="inpSum" value="10"></div>
<div class="input-box"><label>–ê–í–¢–û–í–´–í–û–î</label><input type="number" id="inpAuto" value="1.50"></div>
</div>
<button id="mainBtn" class="btn-main" onclick="onMainAction()">–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É</button>
</div>

<div class="scroll-area" id="listContent"></div>

<div class="bottom-nav">
<div class="nav-btn active">üöÄ –ö—Ä–∞—à</div>
<div class="nav-btn">üèÜ –¢–æ–ø</div>
<div class="nav-btn">üë§ –ü—Ä–æ—Ñ–∏–ª—å</div>
</div>

<script>
/* DATA */
let balance=112.97,state='WAITING',x=1,currentBet=0,hasBet=false,hasTaken=false;
const userProfile={id:8829103,name:"Forever Young",games:14,wins:6,profit:42.35};
const leaders=[
{name:"Alex",profit:312.4},
{name:"Sanya",profit:198.2},
{name:"Maks",profit:155.9},
{name:"Vlad",profit:120.5},
{name:"Den",profit:98.1}
];

let canvas,ctx,loop;
let rocketImg=new Image();
rocketImg.src='https://cdn-icons-png.flaticon.com/512/1043/1043514.png';

function init(){
canvas=document.getElementById('gameCanvas');
canvas.width=window.innerWidth;
canvas.height=260;
ctx=canvas.getContext('2d');
updateBalance();
setTab('bets');
startCycle();
}
function updateBalance(){userBalance.innerText=balance.toFixed(2);}

/* GAME */
function startCycle(){
state='WAITING';x=1;hasBet=false;hasTaken=false;
countdown.style.display='block';
multiplier.style.display='none';
mainBtn.innerText="–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É";
mainBtn.className="btn-main";
mainBtn.disabled=false;
ctx.clearRect(0,0,canvas.width,canvas.height);

let t=5;
let timer=setInterval(()=>{
countdown.innerText=t;
t--;
if(t<0){clearInterval(timer);launch();}
},1000);
}

function onMainAction(){
if(state==='WAITING'&&!hasBet){
let s=parseFloat(inpSum.value);
if(s>0&&s<=balance){
balance-=s;currentBet=s;hasBet=true;updateBalance();
mainBtn.innerText="–°—Ç–∞–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞";
mainBtn.disabled=true;
}
}else if(state==='FLIGHT'&&hasBet&&!hasTaken){
collect();
}
}

function launch(){
state='FLIGHT';
countdown.style.display='none';
multiplier.style.display='block';
if(hasBet){
mainBtn.innerText="–ó–∞–±—Ä–∞—Ç—å";
mainBtn.className="btn-main collect";
mainBtn.disabled=false;
}
let crashAt=(Math.random()*4+1.1).toFixed(2);
let autoOut=parseFloat(inpAuto.value);

loop=setInterval(()=>{
x+=x*0.012;
multiplier.innerText=`x${x.toFixed(2)}`;

let progress=(x-1)*60;
let tx=Math.min(progress+40,canvas.width-60);
let ty=220-Math.min((x-1)*45,180);

ctx.clearRect(0,0,canvas.width,canvas.height);
ctx.beginPath();
ctx.strokeStyle="#0ecb81";ctx.lineWidth=5;
ctx.moveTo(40,220);
ctx.quadraticCurveTo(tx/2+20,220,tx,ty);
ctx.stroke();
ctx.drawImage(rocketImg,tx-25,ty-25,50,50);

if(hasBet&&!hasTaken&&x>=autoOut)collect();
if(x>=crashAt)explode(crashAt);
},60);
}

function collect(){
hasTaken=true;
let win=currentBet*x;
balance+=win;updateBalance();
win-toast.innerHTML=`<b>–í—ã –∑–∞–±—Ä–∞–ª–∏: ${win.toFixed(2)} TON</b>`;
win-toast.classList.add('show');
mainBtn.innerText="–í—ã –∑–∞–±—Ä–∞–ª–∏";
mainBtn.disabled=true;
setTimeout(()=>win-toast.classList.remove('show'),2000);
}

function explode(val){
clearInterval(loop);
state='CRASH';
multiplier.style.color="var(--red)";
let hb=document.getElementById('historyBox');
let tag=document.createElement('div');
tag.className=`h-tag ${val>2?'high':''}`;
tag.innerText=val;
hb.prepend(tag);if(hb.children.length>6)hb.lastChild.remove();
setTimeout(()=>{
multiplier.style.color="white";
startCycle();
},2500);
}

/* TABS */
function setTab(name){
document.querySelectorAll('.tab-item').forEach(t=>t.classList.remove('active'));
const list=listContent;

if(name==='bets'){
document.querySelectorAll('.tab-item')[0].classList.add('active');
list.innerHTML=`
<div class="bet-card"><b>–û–Ω–ª–∞–π–Ω —Å—Ç–∞–≤–∫–∏</b><span style="color:var(--green)">LIVE</span></div>
<div class="bet-card"><div>–ò–≥—Ä–æ–∫_1</div><div style="color:var(--green)">+2.4</div></div>
<div class="bet-card"><div>–ò–≥—Ä–æ–∫_2</div><div style="color:var(--red)">-1.0</div></div>
`;
}

if(name==='top'){
document.querySelectorAll('.tab-item')[1].classList.add('active');
list.innerHTML=`
<div class="bet-card"><b>üèÜ –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</b></div>
${leaders.map((l,i)=>`
<div class="bet-card">
<div>#${i+1} ${l.name}</div>
<div style="color:var(--gold)">+${l.profit} TON</div>
</div>`).join('')}
`;
}

if(name==='prof'){
document.querySelectorAll('.tab-item')[2].classList.add('active');
list.innerHTML=`
<div class="bet-card"><b>üë§ –ü—Ä–æ—Ñ–∏–ª—å</b></div>
<div class="bet-card"><div>ID</div><div>${userProfile.id}</div></div>
<div class="bet-card"><div>–ù–∏–∫</div><div>${userProfile.name}</div></div>
<div class="bet-card"><div>–ò–≥—Ä</div><div>${userProfile.games}</div></div>
<div class="bet-card"><div>–ü–æ–±–µ–¥</div><div>${userProfile.wins}</div></div>
<div class="bet-card"><div>–ü—Ä–æ—Ñ–∏—Ç</div><div style="color:var(--green)">+${userProfile.profit} TON</div></div>
`;
}
}

window.onload=init;
</script>
</body>
</html>  

 <!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Crash Pro - Milestone Edition</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --bg: #0b0e11; --card: #1e2329; --accent: #0098ea; --gold: #f3ba2f; --success: #0ecb81; }
        body { background: var(--bg); color: white; font-family: 'Roboto', sans-serif; margin: 0; overflow: hidden; }
        
        /* –°—Ç–∞—Ç—É—Å-–±–∞—Ä */
        .header { display: flex; justify-content: space-between; padding: 15px; background: #161a1e; border-bottom: 1px solid #2b3139; }
        
        /* –ò–≥—Ä–æ–≤–∞—è –∑–æ–Ω–∞ */
        .game-zone { position: relative; height: 40vh; border-bottom: 2px solid #23282e; }
        #multiplier { position: absolute; left: 50%; top: 40%; transform: translate(-50%, -50%); font-size: 70px; font-weight: 900; z-index: 10; text-shadow: 0 4px 20px rgba(0,0,0,0.6); }
        
        /* –ü–æ–¥–∞—Ä–∫–∏ –Ω–∞ –ª–∏–Ω–∏–∏ (Milestones) */
        .milestone {
            position: absolute; bottom: 10px; padding: 5px 10px; background: rgba(243, 186, 47, 0.1);
            border: 1px solid var(--gold); border-radius: 5px; font-size: 10px; color: var(--gold);
            transition: 0.3s; z-index: 5;
        }
        .milestone.passed { background: var(--gold); color: black; box-shadow: 0 0 15px var(--gold); }

        .controls { padding: 20px; background: var(--card); }
        .bet-box { background: #2b3139; border-radius: 12px; padding: 15px; margin-bottom: 15px; display: flex; justify-content: space-between; }
        input { background: none; border: none; color: white; font-size: 20px; width: 60%; outline: none; }
        
        .btn-main { width: 100%; padding: 22px; border-radius: 15px; border: none; font-size: 22px; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .btn-start { background: var(--success); color: #0b0e11; }
        .btn-cashout { background: var(--accent); color: white; }

        .inventory { padding: 15px; }
        .inv-list { display: flex; gap: 10px; overflow-x: auto; padding-top: 10px; }
        .inv-item { background: #2b3139; min-width: 110px; padding: 10px; border-radius: 8px; text-align: center; border: 1px solid #3e4651; font-size: 11px; }
    </style>
</head>
<body>

<div class="header">
    <div>–ë–∞–ª–∞–Ω—Å: <span id="balance" style="color:var(--success)">1000.00</span> TON</div>
    <div style="color:var(--gold)">üéÅ <span id="gift-alert">–ñ–¥–µ–º –ø–æ–ª–µ—Ç...</span></div>
</div>

<div class="game-zone">
    <div id="multiplier">x1.00</div>
    <div id="m1" class="milestone" style="left: 20%;">x1.5 (Lunar Snake)</div>
    <div id="m2" class="milestone" style="left: 45%;">x3.0 (Santa Hat)</div>
    <div id="m3" class="milestone" style="left: 75%;">x10.0 (UFC Strike)</div>
    <canvas id="chart"></canvas>
</div>

<div class="controls">
    <div class="bet-box">
        <input type="number" id="betAmount" value="10">
        <span style="color:#9299a6">TON</span>
    </div>
    <button id="mainBtn" class="btn-main btn-start" onclick="handleAction()">–°–¢–ê–í–ö–ê</button>
</div>

<div class="inventory">
    <div style="font-size: 12px; color: #9299a6;">–ò–ù–í–ï–ù–¢–ê–†–¨ –ü–†–ï–î–ú–ï–¢–û–í:</div>
    <div class="inv-list" id="invList"></div>
</div>

<script>
    const gifts = [
        {n: "Lunar Snake", p: 3.08, x: 1.5, id: "m1"},
        {n: "Santa Hat", p: 4.62, x: 3.0, id: "m2"},
        {n: "UFC Strike", p: 12.27, x: 10.0, id: "m3"},
        {n: "Plush Pepe", p: 6033.50, x: 1000.0, id: null} // –°–≤–µ—Ä—Ö—Ä–µ–¥–∫–∏–π
    ];

    let bal = 1000.0, x = 1.0, isPlay = false, loop, crash;
    let currentGiftsInRound = [];

    const ctx = document.getElementById('chart').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'line',
        data: { labels: [0], datasets: [{ data: [1], borderColor: '#0098ea', borderWidth: 4, pointRadius: 0, fill: true, backgroundColor: 'rgba(0,152,234,0.1)' }] },
        options: { responsive: true, maintainAspectRatio: false, scales: { x: { display: false }, y: { display: false, min: 1, max: 12 } }, animation: false }
    });

    function handleAction() {
        if (!isPlay) start(); else cashout();
    }

    function start() {
        let b = parseFloat(document.getElementById('betAmount').value);
        if (bal < b) return alert("–ú–∞–ª–æ TON");
        
        bal -= b; updateUI();
        isPlay = true; x = 1.0; currentGiftsInRound = [];
        
        // –°–±—Ä–æ—Å –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –º–µ—Ç–æ–∫
        gifts.forEach(g => { if(g.id) document.getElementById(g.id).classList.remove('passed'); });
        
        crash = (1 / (1 - Math.random())).toFixed(2);
        if (crash > 15) crash = (Math.random() * 5 + 10).toFixed(2); // –î–ª—è —Ç–µ—Å—Ç–∞ –æ–≥—Ä–∞–Ω–∏—á–∏–º

        const btn = document.getElementById('mainBtn');
        btn.innerText = "–ó–ê–ë–†–ê–¢–¨ + –ü–û–î–ê–†–ö–ò";
        btn.className = "btn-main btn-cashout";

        chart.data.labels = [0]; chart.data.datasets[0].data = [1];

        loop = setInterval(() => {
            x += x * 0.015;
            document.getElementById('multiplier').innerText = `x${x.toFixed(2)}`;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫–∏–µ –ø–æ–¥–∞—Ä–∫–∏ "–ø—Ä–æ–ª–µ—Ç–µ–ª–∏"
            gifts.forEach(g => {
                if (x >= g.x && !currentGiftsInRound.includes(g)) {
                    currentGiftsInRound.push(g);
                    if(g.id) document.getElementById(g.id).classList.add('passed');
                    document.getElementById('gift-alert').innerText = `–ü–†–û–ô–î–ï–ù–û: ${g.n}`;
                }
            });

            chart.data.labels.push("");
            chart.data.datasets[0].data.push(x);
            chart.update();

            if (x >= crash) end(true);
        }, 100);
    }

    function cashout() {
        let b = parseFloat(document.getElementById('betAmount').value);
        let win = b * x;
        bal += win;
        
        // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ –ø–æ–¥–∞—Ä–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∫–µ—Ç–∞ —É—Å–ø–µ–ª–∞ –ø—Ä–æ–π—Ç–∏
        currentGiftsInRound.forEach(g => addInv(g));
        
        if (currentGiftsInRound.length > 0) {
            alert(`–í–´–ò–ì–†–´–®: ${win.toFixed(2)} TON + –ü–û–î–ê–†–ö–ò: ${currentGiftsInRound.length} —à—Ç.`);
        }
        
        end(false);
    }

    function end(isCrash) {
        clearInterval(loop);
        isPlay = false;
        const btn = document.getElementById('mainBtn');
        if (isCrash) {
            document.getElementById('multiplier').innerText = "BOOM!";
            document.getElementById('gift-alert').innerText = "–í–°–Å –°–ì–û–†–ï–õ–û";
        }
        btn.innerText = "–°–¢–ê–í–ö–ê";
        btn.className = "btn-main btn-start";
        updateUI();
    }

    function addInv(g) {
        const inv = document.getElementById('invList');
        inv.innerHTML = `<div class="inv-item">üéÅ ${g.n}<br><b>${g.p} TON</b></div>` + inv.innerHTML;
    }

    function updateUI() { document.getElementById('balance').innerText = bal.toFixed(2); }
</script>
</body>
</html>



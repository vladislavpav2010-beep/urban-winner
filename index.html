<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crash</title>

<style>
body{
  margin:0;
  font-family:system-ui;
  background:#07090f;
  color:#fff;
}
.wrapper{padding:14px}

/* TOP */
.top{
  display:flex;
  justify-content:space-between;
}
.badge{
  background:#141a22;
  padding:6px 14px;
  border-radius:20px;
  font-weight:700;
}

/* GAME */
.game{
  margin-top:10px;
  height:260px;
  border-radius:22px;
  background:radial-gradient(circle at top,#1a2450,#07090f);
  position:relative;
  overflow:hidden;
}
.mult{
  position:absolute;
  top:40%;
  width:100%;
  text-align:center;
  font-size:44px;
  font-weight:900;
}
.count{
  position:absolute;
  top:45%;
  width:100%;
  text-align:center;
  font-size:32px;
  opacity:.7;
}

/* ROCKET */
.rocket{
  position:absolute;
  left:20px;
  bottom:20px;
  width:32px;
  height:64px;
  background:#fff;
  clip-path:polygon(50% 0,100% 25%,80% 100%,20% 100%,0 25%);
}
.fire{
  position:absolute;
  bottom:-18px;
  left:50%;
  transform:translateX(-50%);
  width:14px;
  height:22px;
  background:orange;
  border-radius:50%;
  animation:fire .2s infinite alternate;
}
@keyframes fire{from{height:16px}to{height:26px}}

/* CONTROLS */
.controls{margin-top:12px}
input,button{
  width:100%;
  height:48px;
  border-radius:12px;
  border:none;
  margin-bottom:8px;
}
input{
  background:#141a22;
  color:#fff;
  padding-left:12px;
}
button{
  background:#3aa3ff;
  font-weight:800;
}
button.take{background:#2de38c;color:#000}

/* BET LIST */
.list{
  margin-top:10px;
  font-size:13px;
}
.row{
  display:flex;
  justify-content:space-between;
  opacity:.85;
}
.bot{color:#aaa}
</style>
</head>

<body>
<div class="wrapper">

<div class="top">
  <div class="badge">üë• <span id="online">111</span></div>
  <div class="badge">üíé <span id="bal">1000.00</span></div>
</div>

<div class="game">
  <div class="mult" id="mult">–û–ñ–ò–î–ê–ù–ò–ï</div>
  <div class="count" id="count"></div>
  <div class="rocket" id="rocket"><div class="fire"></div></div>
</div>

<div class="controls">
  <input id="bet" type="number" placeholder="–°—Ç–∞–≤–∫–∞">
  <input id="auto" type="number" step="0.01" placeholder="–ê–≤—Ç–æ–≤—ã–≤–æ–¥">
  <button id="btn">–°–î–ï–õ–ê–¢–¨ –°–¢–ê–í–ö–£</button>
</div>

<div class="list" id="list"></div>

</div>

<script>
let bal=1000,state='WAIT',x=1,crash=0,timer,countdown;
let bet=0,taken=false;
const mult=multEl=document.getElementById('mult');
const countEl=document.getElementById('count');
const rocket=document.getElementById('rocket');
const btn=document.getElementById('btn');
const list=document.getElementById('list');

function updBal(){balEl.innerText=bal.toFixed(2)}
const balEl=document.getElementById('bal');

function startCountdown(){
  state='COUNT';
  let c=5;
  mult.innerText='–°–¢–ê–†–¢ –ß–ï–†–ï–ó';
  countEl.innerText=c;
  countdown=setInterval(()=>{
    c--;
    countEl.innerText=c;
    if(c<=0){
      clearInterval(countdown);
      countEl.innerText='';
      startFly();
    }
  },1000);
}

function startFly(){
  state='FLY';
  x=1;
  taken=false;
  crash=(Math.random()*8+1.2).toFixed(2);
  timer=setInterval(fly,50);
}

function fly(){
  x+=x*0.015;
  if(x>=crash){doCrash();return}
  mult.innerText='x'+x.toFixed(2);
  rocket.style.left=20+x*22+'px';
  rocket.style.bottom=20+x*10+'px';
  if(auto.value && x>=auto.value && !taken)take();
}

function take(){
  if(taken)return;
  taken=true;
  bal+=bet*x;
  updBal();
}

function doCrash(){
  clearInterval(timer);
  mult.innerText='x'+crash;
  state='WAIT';
  rocket.style.left='20px';
  rocket.style.bottom='20px';
  setTimeout(startCountdown,2000);
}

/* BUTTON */
btn.onclick=()=>{
  if(state!=='WAIT')return;
  bet=+betInput.value;
  if(!bet||bet>bal)return alert('–û—à–∏–±–∫–∞ —Å—Ç–∞–≤–∫–∏');
  bal-=bet; updBal();
  addRow('–í—ã',bet,'—Å—Ç–∞–≤–∫–∞');
  startCountdown();
};

/* BOTS */
function botAction(){
  if(state!=='FLY')return;
  if(Math.random()<0.15){
    const m=(Math.random()*4+1.1).toFixed(2);
    addRow('–ë–æ—Ç',0,'x'+m,true);
  }
}
setInterval(botAction,300);

/* LIST */
function addRow(name,amt,res,bot=false){
  const d=document.createElement('div');
  d.className='row'+(bot?' bot':'');
  d.innerHTML=`<span>${name}</span><span>${res}</span>`;
  list.prepend(d);
  if(list.children.length>6)list.lastChild.remove();
}

updBal();
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Crash DEMO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  background:#0b0b0b;
  color:#fff;
  font-family:Arial;
}
.top{
  display:flex;
  justify-content:space-between;
  padding:10px 14px;
}
.balance{
  background:#111;
  padding:6px 14px;
  border-radius:20px;
}
#game{
  text-align:center;
  padding-top:20px;
}
#mult{
  font-size:42px;
  font-weight:bold;
}
#rocket{
  width:40px;
  margin:30px auto;
  transform:rotate(-45deg);
}
.controls{
  display:flex;
  justify-content:space-around;
  padding:10px;
}
.controls input{
  width:45%;
  padding:10px;
  border:none;
  border-radius:10px;
}
button{
  width:90%;
  margin:10px auto;
  padding:14px;
  font-size:16px;
  border:none;
  border-radius:12px;
  background:#2196f3;
  color:#fff;
}
.history{
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
}
.hist{
  background:#222;
  margin:4px;
  padding:4px 8px;
  border-radius:10px;
  font-size:12px;
}
.hidden{display:none}
.menu{
  position:fixed;
  bottom:0;
  width:100%;
  background:#111;
  display:flex;
  justify-content:space-around;
  padding:10px 0;
}
.menu div{opacity:.5}
.menu .active{opacity:1;color:#4da}
.panel{
  padding:15px;
}
</style>
</head>

<body>

<div class="top">
  <div>ğŸŸ¢ <span id="online">123</span> Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½</div>
  <div class="balance">ğŸ’ <span id="bal">100.00</span></div>
</div>

<div id="crash" class="panel">
  <div id="game">
    <div id="mult">x1.00</div>
    <img id="rocket" src="https://cdn-icons-png.flaticon.com/512/3212/3212608.png">
  </div>

  <div class="controls">
    <input id="bet" type="number" value="10">
    <input id="auto" type="number" value="1.50" step="0.01">
  </div>

  <button onclick="placeBet()">Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ ÑÑ‚Ğ°Ğ²ĞºÑƒ</button>

  <div class="history" id="history"></div>
</div>

<div id="top" class="panel hidden">
  <h3>ğŸ† Ğ¢ĞĞŸ Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹ÑˆĞµĞ¹</h3>
  <div id="toplist"></div>
</div>

<div id="profile" class="panel hidden">
  <h3>ğŸ‘¤ ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ</h3>
  ĞĞ¸Ğº: <b id="nick"></b><br><br>
  Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ: ğŸ’ <span id="bal2"></span><br><br>
  Ğ ĞµÑ„.ĞºĞ¾Ğ´: <b id="ref"></b><br><br>
  <button onclick="topUp()">â• ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ (DEMO)</button>
  <button onclick="withdraw()">â– Ğ’Ñ‹Ğ²ĞµÑÑ‚Ğ¸ (DEMO)</button>
</div>

<div class="menu">
  <div onclick="tab('top')">ğŸ†<br>Ğ¢Ğ¾Ğ¿</div>
  <div class="active" onclick="tab('crash')">ğŸš€<br>ĞšÑ€Ğ°Ñˆ</div>
  <div onclick="tab('profile')">ğŸ‘¤<br>ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ</div>
</div>

<script>
let bal=100;
let mult=1;
let playing=false;
let bet=0;
let auto=0;
let hist=[];
let nick="Player"+Math.floor(Math.random()*1000);
let refCode=Math.random().toString(36).substr(2,6);

document.getElementById("nick").innerText=nick;
document.getElementById("ref").innerText=refCode;

function update(){
  document.getElementById("bal").innerText=bal.toFixed(2);
  document.getElementById("bal2").innerText=bal.toFixed(2);
}

function tab(t){
  ["crash","top","profile"].forEach(x=>{
    document.getElementById(x).classList.add("hidden");
  });
  document.getElementById(t).classList.remove("hidden");
}

function placeBet(){
  if(playing) return;
  bet=+document.getElementById("bet").value;
  auto=+document.getElementById("auto").value;
  if(bet>bal) return alert("ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°");
  bal-=bet;
  mult=1;
  playing=true;
  crash();
  update();
}

function crash(){
  let crashAt=(Math.random()*3+1).toFixed(2);
  let interval=setInterval(()=>{
    mult+=0.01;
    document.getElementById("mult").innerText="x"+mult.toFixed(2);
    document.getElementById("rocket").style.marginLeft=(mult*20)+"px";
    if(mult>=crashAt){
      clearInterval(interval);
      end(false,crashAt);
    }
    if(auto && mult>=auto){
      clearInterval(interval);
      end(true,mult);
    }
  },50);
}

function end(win,m){
  playing=false;
  if(win){
    let w=bet*m;
    bal+=w;
    addTop(w);
  }
  hist.unshift(m.toFixed(2));
  hist=hist.slice(0,10);
  drawHist();
  update();
}

function drawHist(){
  let h=document.getElementById("history");
  h.innerHTML="";
  hist.forEach(x=>{
    let d=document.createElement("div");
    d.className="hist";
    d.innerText="x"+x;
    h.appendChild(d);
  });
}

function addTop(w){
  let t=document.getElementById("toplist");
  let d=document.createElement("div");
  d.innerText=nick+" Ğ²Ñ‹Ğ¸Ğ³Ñ€Ğ°Ğ» "+w.toFixed(2);
  t.prepend(d);
}

function topUp(){
  let a=+prompt("Ğ¡ÑƒĞ¼Ğ¼Ğ° DEMO");
  if(a>0){ bal+=a; update(); }
}

function withdraw(){
  let a=+prompt("Ğ¡ÑƒĞ¼Ğ¼Ğ° DEMO");
  if(a>0 && a<=bal){ bal-=a; update(); }
}

update();
</script>

</body>
</html>

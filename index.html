<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TonCrash Mobile</title>
    <style>
        :root {
            --bg: #0f1115;
            --panel: #181c23;
            --accent: #0088cc;
            --green: #0ecb81;
            --red: #f6465d;
            --text: #ffffff;
        }
        body {
            background: var(--bg);
            color: var(--text);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* –®–∞–ø–∫–∞ */
        header {
            padding: 10px 15px;
            background: var(--panel);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #2a2e35;
        }
        .balance-area { color: var(--green); font-weight: bold; font-size: 14px; }
        .top-btns { display: flex; gap: 8px; }
        button.small { background: #2b3139; color: white; border: none; padding: 5px 10px; border-radius: 5px; font-size: 12px; }

        /* –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ (–º–∞–ª–µ–Ω—å–∫–æ–µ, –∫–∞–∫ —Ç—ã –ø—Ä–æ—Å–∏–ª) */
        .game-screen {
            height: 40%;
            position: relative;
            background: radial-gradient(circle at bottom left, #1a1f29, #0f1115);
            overflow: hidden;
            border-bottom: 2px solid #2a2e35;
        }
        #multiplier {
            position: absolute;
            width: 100%;
            text-align: center;
            top: 30%;
            font-size: 48px;
            font-weight: 900;
            z-index: 10;
            text-shadow: 0 0 20px rgba(255,255,255,0.2);
        }
        #rocket {
            position: absolute;
            bottom: 20px;
            left: 20px;
            font-size: 40px;
            transition: transform 0.1s linear;
            z-index: 5;
        }

        /* –ü–æ–¥–∞—Ä–æ–∫ –≤ –Ω–µ–±–µ */
        #gift-in-sky {
            position: absolute;
            display: none;
            cursor: pointer;
            z-index: 15;
            filter: drop-shadow(0 0 10px gold);
            animation: pulse 1s infinite;
        }
        @keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.2);} 100% {transform: scale(1);} }

        /* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .controls {
            flex: 1;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            background: var(--bg);
        }
        .bet-input-box {
            display: flex;
            gap: 10px;
            background: var(--panel);
            padding: 10px;
            border-radius: 10px;
        }
        .bet-input-box input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            font-size: 18px;
            outline: none;
        }
        .main-btn {
            background: var(--green);
            border: none;
            border-radius: 10px;
            color: black;
            font-weight: bold;
            font-size: 18px;
            padding: 15px;
            height: 60px;
        }

        /* –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å */
        .inventory-section {
            margin-top: 10px;
            background: var(--panel);
            border-radius: 10px;
            padding: 10px;
            flex-grow: 1;
            overflow-y: auto;
        }
        .inventory-title { font-size: 12px; color: #848e9c; margin-bottom: 5px; }
        .item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #2b3139;
            padding: 8px;
            border-radius: 5px;
            margin-bottom: 5px;
            font-size: 13px;
        }
        .sell-btn { background: var(--accent); border: none; color: white; border-radius: 3px; padding: 3px 7px; }

        /* –ò—Å—Ç–æ—Ä–∏—è –∏–∫—Å–æ–≤ */
        .history { display: flex; gap: 5px; overflow-x: auto; padding-bottom: 5px; }
        .hist-chip { background: #2b3139; padding: 2px 8px; border-radius: 10px; font-size: 11px; }

    </style>
</head>
<body>

<header>
    <div class="balance-area">üíé <span id="user-balance">0.00</span> TON</div>
    <div class="top-btns">
        <button class="small" onclick="getTestTon()" id="btn-faucet">+0.10 TON</button>
        <button class="small" onclick="toggleLang()" id="btn-lang">EN</button>
    </div>
</header>

<div class="game-screen">
    <div id="multiplier">x1.00</div>
    <div id="rocket">üöÄ</div>
    <div id="gift-in-sky" onclick="catchGift()">üéÅ</div>
</div>

<div class="controls">
    <div class="history" id="history-line"></div>
    
    <div class="bet-input-box">
        <input type="number" id="bet-amount" value="0.10" step="0.1">
        <span style="color:#848e9c; align-self:center">TON</span>
    </div>

    <button class="main-btn" id="action-btn" onclick="handleAction()">START</button>

    <div class="inventory-section">
        <div class="inventory-title" id="inv-title">–ò–ù–í–ï–ù–¢–ê–†–¨ (0)</div>
        <div id="inventory-list"></div>
    </div>
</div>

<script>
    let balance = 0.00;
    let multiplier = 1.00;
    let isFlying = false;
    let interval;
    let lang = 'RU';
    let inventory = [];
    let currentGift = null;

    const texts = {
        RU: { start: "–°–¢–ê–†–¢", take: "–ó–ê–ë–†–ê–¢–¨", wait: "–ñ–î–ï–ú...", boom: "–ë–ê–•!", inv: "–ò–ù–í–ï–ù–¢–ê–†–¨", sell: "–ü—Ä–æ–¥–∞—Ç—å" },
        EN: { start: "START", take: "CASH OUT", wait: "WAIT...", boom: "BOOM!", inv: "INVENTORY", sell: "Sell" }
    };

    function toggleLang() {
        lang = lang === 'RU' ? 'EN' : 'RU';
        document.getElementById('btn-lang').innerText = lang === 'RU' ? 'EN' : 'RU';
        updateUI();
    }

    function updateUI() {
        const btn = document.getElementById('action-btn');
        if (!isFlying) btn.innerText = texts[lang].start;
        document.getElementById('inv-title').innerText = `${texts[lang].inv} (${inventory.length})`;
        renderInventory();
    }

    function getTestTon() {
        balance += 0.10;
        updateBalance();
        document.getElementById('btn-faucet').disabled = true;
        setTimeout(() => document.getElementById('btn-faucet').disabled = false, 5000);
    }

    function updateBalance() {
        document.getElementById('user-balance').innerText = balance.toFixed(2);
    }

    function handleAction() {
        if (!isFlying) startRound();
        else cashOut();
    }

    function startRound() {
        let bet = parseFloat(document.getElementById('bet-amount').value);
        if (balance < bet) return alert("No balance!");

        balance -= bet;
        updateBalance();

        isFlying = true;
        multiplier = 1.00;
        const btn = document.getElementById('action-btn');
        btn.innerText = texts[lang].take;
        btn.style.background = "var(--accent)";

        const crashAt = (Math.random() * 5 + 1.1).toFixed(2);
        const giftAt = (Math.random() * (crashAt - 1.1) + 1.1).toFixed(2);
        let giftShown = false;

        interval = setInterval(() => {
            multiplier += 0.01;
            document.getElementById('multiplier').innerText = `x${multiplier.toFixed(2)}`;
            
            // –î–≤–∏–∂–µ–Ω–∏–µ —Ä–∞–∫–µ—Ç—ã
            let pos = (multiplier - 1) * 40;
            document.getElementById('rocket').style.transform = `translate(${pos}px, -${pos}px) rotate(-45deg)`;

            // –ü–æ—è–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞
            if (multiplier >= giftAt && !giftShown) {
                showGift();
                giftShown = true;
            }

            if (multiplier >= crashAt) {
                boom();
            }
        }, 60);
    }

    function showGift() {
        const gift = document.getElementById('gift-in-sky');
        gift.style.display = "block";
        gift.style.left = (Math.random() * 60 + 20) + "%";
        gift.style.top = (Math.random() * 40 + 10) + "%";
        currentGift = { id: Date.now(), name: "–ü–æ–¥–∞—Ä–æ–∫ 2.6 TON", price: 2.6 };
    }

    function catchGift() {
        if (currentGift) {
            inventory.push(currentGift);
            currentGift = null;
            document.getElementById('gift-in-sky').style.display = "none";
            updateUI();
        }
    }

    function cashOut() {
        if (!isFlying) return;
        let bet = parseFloat(document.getElementById('bet-amount').value);
        balance += bet * multiplier;
        updateBalance();
        endRound(false);
    }

    function boom() {
        document.getElementById('multiplier').innerText = texts[lang].boom;
        document.getElementById('multiplier').style.color = "var(--red)";
        document.getElementById('rocket').innerHTML = "üí•";
        endRound(true);
    }

    function endRound(isBoom) {
        clearInterval(interval);
        isFlying = false;
        document.getElementById('gift-in-sky').style.display = "none";
        
        setTimeout(() => {
            document.getElementById('multiplier').style.color = "white";
            document.getElementById('multiplier').innerText = "x1.00";
            document.getElementById('rocket').innerHTML = "üöÄ";
            document.getElementById('rocket').style.transform = "translate(0,0) rotate(-45deg)";
            const btn = document.getElementById('action-btn');
            btn.style.background = "var(--green)";
            updateUI();
        }, 2000);
    }

    function renderInventory() {
        const list = document.getElementById('inventory-list');
        list.innerHTML = "";
        inventory.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = "item";
            div.innerHTML = `
                <span>üéÅ ${item.name}</span>
                <button class="sell-btn" onclick="sellItem(${index})">${texts[lang].sell}</button>
            `;
            list.appendChild(div);
        });
    }

    function sellItem(index) {
        balance += inventory[index].price;
        inventory.splice(index, 1);
        updateBalance();
        updateUI();
    }

    updateUI();
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>TON ARENA: LEVIATHAN UNLIMITED</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@500;800&display=swap" rel="stylesheet">
    <style>
        /* ================================================================
           1. CSS CONSTANTS & CYBERCORE (–û–°–ù–û–í–ù–´–ï –¶–í–ï–¢–ê –ò –°–¢–ò–õ–ò)
           ================================================================
        */
        :root {
            --bg-deep: #020205;
            --bg-panel: #0a0b10;
            --bg-card: #12141d;
            --accent: #00f2ff;
            --accent-glow: rgba(0, 242, 255, 0.4);
            --neon-purple: #bc13fe;
            --neon-pink: #ff00de;
            --gold: #ffcc00;
            --gold-glow: rgba(255, 204, 0, 0.3);
            --success: #00ffa3;
            --danger: #ff2e5d;
            --text-main: #ffffff;
            --text-dim: #6c727a;
            --font-main: 'Inter', sans-serif;
            --font-cyber: 'Orbitron', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
            --border-light: rgba(255, 255, 255, 0.05);
            --border-accent: rgba(0, 242, 255, 0.2);
            --glass: rgba(255, 255, 255, 0.03);
            --radius-lg: 30px;
            --radius-md: 18px;
            --shadow-neo: 0 0 20px rgba(0,0,0,0.5), 0 0 10px var(--accent-glow);
        }

        /* RESET & SCROLLING */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            background: var(--bg-deep); color: var(--text-main); font-family: var(--font-main);
            height: 100vh; overflow: hidden; user-select: none;
        }
        ::-webkit-scrollbar { width: 0; display: none; }

        /* ANIMATIONS */
        @keyframes scanline { 0% { transform: translateY(-100%); } 100% { transform: translateY(100vh); } }
        @keyframes pulse-gold { 0%, 100% { box-shadow: 0 0 10px var(--gold-glow); } 50% { box-shadow: 0 0 25px var(--gold-glow); } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes bg-pan { 0% { background-position: 0% 50%; } 100% { background-position: 100% 50%; } }

        /* ================================================================
           2. TOP HUB (PASS & BALANCE)
           ================================================================
        */
        .top-hub {
            position: relative; z-index: 100; padding: 20px;
            background: linear-gradient(180deg, rgba(10,11,16,0.95) 0%, transparent 100%);
            border-bottom: 1px solid var(--border-light);
        }

        .battle-pass {
            background: linear-gradient(90deg, #1a1b23, #0a0b10, #1a1b23);
            background-size: 200% 200%; animation: bg-pan 5s linear infinite;
            border: 1px solid var(--gold); border-radius: var(--radius-md);
            padding: 15px; margin-bottom: 20px; position: relative; overflow: hidden;
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.1);
        }
        .pass-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .pass-tag { font-family: var(--font-cyber); font-size: 10px; color: var(--gold); letter-spacing: 2px; }
        .pass-lvl { font-family: var(--font-cyber); font-weight: 900; font-size: 18px; }
        .pass-bar-bg { height: 8px; background: rgba(255,255,255,0.05); border-radius: 4px; position: relative; }
        .pass-bar-fill { 
            height: 100%; background: linear-gradient(90deg, var(--gold), #fff); 
            width: 45%; border-radius: 4px; box-shadow: 0 0 10px var(--gold);
            transition: width 1s ease-in-out;
        }

        .main-stats { display: flex; justify-content: space-between; align-items: center; }
        .user-box { display: flex; align-items: center; gap: 12px; }
        .avatar-frame {
            width: 48px; height: 48px; border-radius: 14px; background: var(--accent);
            display: flex; align-items: center; justify-content: center;
            font-family: var(--font-cyber); font-weight: 900; color: #000; font-size: 20px;
            box-shadow: 0 0 15px var(--accent-glow);
        }
        .bal-card {
            background: var(--bg-card); padding: 8px 15px; border-radius: 14px;
            border: 1px solid var(--border-accent); display: flex; align-items: center; gap: 10px;
        }
        .bal-card span { font-family: var(--font-mono); font-size: 20px; font-weight: 800; color: var(--accent); }

        /* ================================================================
           3. VIEWPORT ENGINE
           ================================================================
        */
        .viewport { height: calc(100vh - 200px); overflow-y: auto; padding: 20px; position: relative; }
        .screen { display: none; opacity: 0; transform: translateY(20px); transition: 0.4s cubic-bezier(0.18, 0.89, 0.32, 1.28); }
        .screen.active { display: block; opacity: 1; transform: translateY(0); }

        /* ================================================================
           4. ARENA SCREEN (UNTOUCHED LOGIC)
           ================================================================
        */
        .arena-v1 {
            background: var(--glass); border: 2px solid var(--accent);
            border-radius: var(--radius-lg); padding: 50px 25px; text-align: center;
            position: relative; overflow: hidden;
            box-shadow: inset 0 0 30px var(--accent-glow);
        }
        .arena-v1::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,242,255,0.03) 2px, rgba(0,242,255,0.03) 4px);
            pointer-events: none;
        }
        .btn-battle {
            width: 100%; background: var(--accent); color: #000; border: none;
            padding: 22px; border-radius: 20px; font-family: var(--font-cyber);
            font-weight: 900; font-size: 20px; cursor: pointer; margin-top: 30px;
            box-shadow: 0 10px 30px var(--accent-glow); transition: 0.3s;
        }
        .btn-battle:active { transform: scale(0.95); box-shadow: none; }

        /* ================================================================
           5. SOLO HUB (GAMES & CASES)
           ================================================================
        */
        .section-title { font-family: var(--font-cyber); font-size: 14px; margin: 25px 0 15px; color: var(--text-dim); letter-spacing: 2px; }
        
        .game-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .game-card {
            background: var(--bg-card); border: 1px solid var(--border-light);
            border-radius: var(--radius-md); padding: 25px 15px; text-align: center;
            transition: 0.3s; position: relative;
        }
        .game-card:active { border-color: var(--accent); background: var(--glass); }
        .game-card i { font-size: 32px; display: block; margin-bottom: 12px; filter: drop-shadow(0 0 10px var(--accent)); }
        .game-card b { font-family: var(--font-cyber); font-size: 13px; }

        .case-container { display: flex; flex-direction: column; gap: 15px; }
        .case-card {
            background: linear-gradient(135deg, #12141d 0%, #050505 100%);
            border-radius: var(--radius-md); padding: 20px; border-left: 5px solid var(--accent);
            display: flex; justify-content: space-between; align-items: center;
            border-top: 1px solid var(--border-light); border-bottom: 1px solid var(--border-light); border-right: 1px solid var(--border-light);
        }
        .case-card.gold { border-left-color: var(--gold); box-shadow: 0 0 15px rgba(255, 204, 0, 0.1); }
        .case-card.epic { border-left-color: var(--neon-purple); }

        /* ================================================================
           6. MODALS & MINI-GAMES ENGINES
           ================================================================
        */
        .modal {
            position: fixed; inset: 0; background: var(--bg-deep); z-index: 1000;
            display: none; flex-direction: column; padding: 20px;
            animation: slideUp 0.4s cubic-bezier(0, 0, 0.2, 1);
        }
        .modal.active { display: flex; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

        /* ================================================================
           7. NAVIGATION BAR
           ================================================================
        */
        .nav-bar {
            position: fixed; bottom: 0; width: 100%; height: 90px;
            background: rgba(10,11,16,0.98); backdrop-filter: blur(20px);
            border-top: 1px solid var(--border-light); display: flex;
            justify-content: space-around; padding-bottom: 25px; z-index: 500;
        }
        .nav-item { 
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: var(--text-dim); gap: 8px; transition: 0.3s; width: 25%;
        }
        .nav-item.active { color: var(--accent); }
        .nav-item i { font-size: 24px; }
        .nav-item label { font-size: 10px; font-weight: 800; font-family: var(--font-cyber); }

        /* ================================================================
           8. PROMO & TOASTS
           ================================================================
        */
        #toast-wrap { position: fixed; top: 100px; left: 50%; transform: translateX(-50%); z-index: 2000; width: 90%; }
        .toast {
            background: var(--bg-card); border: 1px solid var(--accent); padding: 18px;
            border-radius: 15px; margin-bottom: 12px; box-shadow: 0 15px 40px rgba(0,0,0,0.8);
            display: flex; align-items: center; gap: 15px; animation: bounceIn 0.5s ease;
        }
        @keyframes bounceIn { 0% { opacity: 0; transform: scale(0.3); } 50% { opacity: 1; transform: scale(1.05); } 100% { transform: scale(1); } }

    </style>
</head>
<body>

    <div id="toast-wrap"></div>

    <div class="top-hub">
        <div class="battle-pass">
            <div class="pass-header">
                <span class="pass-tag">SEASON 01: LEVIATHAN</span>
                <span class="pass-lvl">LVL 14</span>
            </div>
            <div class="pass-bar-bg">
                <div class="pass-bar-fill" id="pb-fill"></div>
            </div>
            <div style="font-size: 10px; color: var(--text-dim); margin-top: 8px; text-align: right; font-weight: 800;">
                450 / 1000 XP TO NEXT REWARD
            </div>
        </div>

        <div class="main-stats">
            <div class="user-box">
                <div class="avatar-frame">L</div>
                <div>
                    <p id="ui-name" style="font-weight: 900; font-size: 16px;">Leviathan_Dev</p>
                    <p style="color: var(--gold); font-size: 10px; font-weight: 900; font-family: var(--font-cyber);">ELITE RANK</p>
                </div>
            </div>
            <div class="bal-card">
                <span id="ui-bal">1,500.00</span>
                <img src="https://img.icons8.com/emoji/48/diamond-emoji.png" width="20" height="20">
            </div>
        </div>
    </div>

    <main class="viewport" id="vport">
        
        <section id="scr-arena" class="screen active">
            <div class="arena-v1">
                <div style="font-family: var(--font-cyber); font-size: 12px; color: var(--accent); margin-bottom: 10px;">SYSTEM STATUS: ONLINE</div>
                <h1 style="font-family: var(--font-cyber); font-size: 32px; font-weight: 900; letter-spacing: -1px;">ARENA HUB</h1>
                <p style="color: var(--text-dim); font-size: 14px; margin-top: 10px;">Classic 1v1 Battle for Diamonds and Rank</p>
                <button class="btn-battle" onclick="startArena()">FIND OPPONENT</button>
            </div>

            <div class="section-title">GLOBAL LEADERBOARD</div>
            <div id="leaderboard" style="display: flex; flex-direction: column; gap: 10px;">
                </div>
        </section>

        <section id="scr-solo" class="screen">
            <h1 style="font-family: var(--font-cyber); font-size: 24px;">SOLO OPERATIONS</h1>
            
            <div class="section-title">MINI GAMES</div>
            <div class="game-grid">
                <div class="game-card" onclick="openGame('mines')">
                    <i style="color: var(--danger);">üí£</i>
                    <b>MINES</b>
                    <div style="font-size: 9px; margin-top: 5px; color: var(--accent);">MAX x24.5</div>
                </div>
                <div class="game-card" onclick="openGame('crash')">
                    <i style="color: var(--success);">üìà</i>
                    <b>CRASH</b>
                    <div style="font-size: 9px; margin-top: 5px; color: var(--accent);">REALTIME</div>
                </div>
                <div class="game-card" onclick="openGame('tower')">
                    <i style="color: var(--gold);">üè∞</i>
                    <b>TOWER</b>
                    <div style="font-size: 9px; margin-top: 5px; color: var(--accent);">LADDER</div>
                </div>
                <div class="game-card" onclick="openGame('dice')">
                    <i style="color: var(--neon-purple);">üé≤</i>
                    <b>DICE</b>
                    <div style="font-size: 9px; margin-top: 5px; color: var(--accent);">50/50</div>
                </div>
            </div>

            <div class="section-title">PREMIUM SUPPLY</div>
            <div class="case-container">
                <div class="case-card">
                    <div>
                        <b style="font-family: var(--font-cyber);">WOODEN BOX</b>
                        <p style="font-size: 11px; color: var(--text-dim);">Drops: 10 - 100 üíé</p>
                    </div>
                    <button class="btn-battle" style="margin:0; width:auto; padding: 10px 20px; font-size: 12px;" onclick="openCase(50, 'Wood')">50 üíé</button>
                </div>
                <div class="case-card gold">
                    <div>
                        <b style="font-family: var(--font-cyber); color: var(--gold);">ROYAL CRATE</b>
                        <p style="font-size: 11px; color: var(--text-dim);">Drops: 150 - 1000 üíé</p>
                    </div>
                    <button class="btn-battle" style="margin:0; width:auto; padding: 10px 20px; font-size: 12px; background: var(--gold);" onclick="openCase(250, 'Royal')">250 üíé</button>
                </div>
            </div>

            <div class="section-title">PROMO TERMINAL</div>
            <div style="background: var(--bg-card); padding: 20px; border-radius: var(--radius-md); border: 1px solid var(--border-light);">
                <input type="text" id="promo-input" placeholder="ENTER CODE..." style="width: 100%; background: #000; border: 1px solid var(--border-accent); padding: 15px; border-radius: 12px; color: var(--accent); font-family: var(--font-mono); font-weight: 800; text-align: center; margin-bottom: 15px;">
                <button class="btn-battle" style="margin: 0; padding: 15px;" onclick="claimPromo()">ACTIVATE ENCRYPTION</button>
            </div>
        </section>

        <section id="scr-profile" class="screen">
            <div style="text-align: center; padding: 30px 0;">
                <div class="avatar-frame" style="width: 100px; height: 100px; font-size: 40px; margin: 0 auto 20px; border-radius: 30px;">L</div>
                <h1 style="font-family: var(--font-cyber);">Leviathan_Dev</h1>
                <p style="color: var(--text-dim); font-family: var(--font-mono); font-size: 12px; margin-top: 5px;">UID: 882-990-112</p>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div style="background: var(--bg-card); padding: 20px; border-radius: 15px; border: 1px solid var(--border-light);">
                    <small style="color: var(--text-dim); font-weight: 800;">ARENA WINS</small>
                    <p style="font-size: 24px; font-family: var(--font-cyber);">432</p>
                </div>
                <div style="background: var(--bg-card); padding: 20px; border-radius: 15px; border: 1px solid var(--border-light);">
                    <small style="color: var(--text-dim); font-weight: 800;">PROFIT</small>
                    <p style="font-size: 24px; font-family: var(--font-cyber); color: var(--success);">+12k</p>
                </div>
            </div>

            <div class="section-title">INVENTORY</div>
            <div id="inventory-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
                <div style="aspect-ratio: 1; background: var(--bg-card); border-radius: 10px; border: 1px dashed var(--border-light);"></div>
                <div style="aspect-ratio: 1; background: var(--bg-card); border-radius: 10px; border: 1px dashed var(--border-light);"></div>
                <div style="aspect-ratio: 1; background: var(--bg-card); border-radius: 10px; border: 1px dashed var(--border-light);"></div>
                <div style="aspect-ratio: 1; background: var(--bg-card); border-radius: 10px; border: 1px dashed var(--border-light);"></div>
            </div>
        </section>

    </main>

    <nav class="nav-bar">
        <div class="nav-item" onclick="changeTab('solo', this)">
            <i>üéÆ</i><label>SOLO</label>
        </div>
        <div class="nav-item active" onclick="changeTab('arena', this)">
            <i>‚öîÔ∏è</i><label>ARENA</label>
        </div>
        <div class="nav-item" onclick="toast('Market Closed')">
            <i>üíé</i><label>MARKET</label>
        </div>
        <div class="nav-item" onclick="changeTab('profile', this)">
            <i>üë§</i><label>PROFILE</label>
        </div>
    </nav>

    <div id="game-modal" class="modal">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <h2 id="modal-title" style="font-family: var(--font-cyber);">MINES</h2>
            <button onclick="closeModal()" style="background: var(--bg-card); border: 1px solid var(--danger); color: var(--danger); padding: 10px 20px; border-radius: 10px; font-weight: 800;">EXIT</button>
        </div>
        <div id="modal-body" style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;">
            </div>
    </div>

    <script>
        /* ================================================================
           CORE ENGINE JS (2.1k+ LINES POTENTIAL)
           ================================================================
        */

        let state = {
            bal: 1500.00,
            xp: 450,
            lvl: 14,
            name: "Leviathan_Dev",
            inventory: []
        };

        // UI UPDATERS
        function syncUI() {
            document.getElementById('ui-bal').innerText = state.bal.toLocaleString(undefined, {minimumFractionDigits: 2});
            document.getElementById('pb-fill').style.width = (state.xp / 1000 * 100) + "%";
            localStorage.setItem('leviathan_save', JSON.stringify(state));
        }

        function toast(msg, color = 'var(--accent)') {
            const wrap = document.getElementById('toast-wrap');
            const t = document.createElement('div');
            t.className = 'toast';
            t.style.borderColor = color;
            t.innerHTML = `<div style="width:10px; height:10px; border-radius:50%; background:${color}"></div> <b>${msg}</b>`;
            wrap.appendChild(t);
            setTimeout(() => {
                t.style.opacity = '0';
                t.style.transform = 'translateX(100px)';
                setTimeout(() => t.remove(), 500);
            }, 3000);
        }

        // TAB SYSTEM
        function changeTab(tabId, el) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('scr-' + tabId).classList.add('active');
            el.classList.add('active');
            
            // Haptic simulation
            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');
            }
        }

        // ARENA LOGIC
        function startArena() {
            const btn = document.querySelector('.btn-battle');
            btn.innerText = "INITIALIZING...";
            btn.disabled = true;
            
            setTimeout(() => {
                btn.innerText = "SEARCHING...";
                setTimeout(() => {
                    toast("Opponent Found! Connecting...", "var(--success)");
                    btn.innerText = "FIND OPPONENT";
                    btn.disabled = false;
                }, 2000);
            }, 1000);
        }

        // CASE OPENING
        function openCase(price, name) {
            if(state.bal < price) return toast("Insufficient Balance", "var(--danger)");
            state.bal -= price;
            syncUI();
            
            toast(`Opening ${name} Box...`, "var(--gold)");
            
            setTimeout(() => {
                let win = 0;
                if(name === 'Wood') win = Math.floor(Math.random() * 90) + 10;
                else win = Math.floor(Math.random() * 850) + 150;
                
                state.bal += win;
                toast(`Result: +${win} üíé`, "var(--success)");
                syncUI();
            }, 2000);
        }

        // PROMO SYSTEM
        function claimPromo() {
            const input = document.getElementById('promo-input');
            const code = input.value.toUpperCase();
            
            if(code === 'LEVIATHAN' || code === 'GIGA') {
                state.bal += 5000;
                toast("Secret Code Accepted! +5,000 üíé", "var(--success)");
                input.value = "";
                syncUI();
            } else {
                toast("Invalid Encryption Key", "var(--danger)");
            }
        }

        // MINI-GAMES ROUTER
        function openGame(game) {
            const modal = document.getElementById('game-modal');
            const title = document.getElementById('modal-title');
            const body = document.getElementById('modal-body');
            
            modal.classList.add('active');
            title.innerText = game.toUpperCase();
            
            if(game === 'mines') {
                body.innerHTML = `
                    <div style="display:grid; grid-template-columns: repeat(5, 1fr); gap: 10px;">
                        ${Array(25).fill().map((_, i) => `<div class="mine-cell" style="width:50px; height:50px; background:var(--bg-card); border:1px solid var(--border-accent); border-radius:10px;" onclick="this.style.background='var(--accent)'"></div>`).join('')}
                    </div>
                    <button class="btn-battle" style="width:200px">START SESSION</button>
                `;
            } else {
                body.innerHTML = `<h1 style="color:var(--text-dim)">ENGINE LOADING...</h1>`;
            }
        }

        function closeModal() {
            document.getElementById('game-modal').classList.remove('active');
        }

        // LEADERBOARD GEN
        function initLeaderboard() {
            const lb = document.getElementById('leaderboard');
            const data = [
                {name: "WhaleTON", val: "45,000", rank: "1"},
                {name: "Sniper_01", val: "32,100", rank: "2"},
                {name: "CryptoKing", val: "28,500", rank: "3"}
            ];
            
            lb.innerHTML = data.map(i => `
                <div style="background:var(--bg-card); padding:15px; border-radius:12px; display:flex; justify-content:space-between; border-left: 3px solid ${i.rank === '1' ? 'var(--gold)' : 'var(--accent)'}">
                    <span><b>${i.rank}.</b> ${i.name}</span>
                    <span style="color:var(--accent); font-family:var(--font-mono)">${i.val} RP</span>
                </div>
            `).join('');
        }

        window.onload = () => {
            initLeaderboard();
            syncUI();
        };

    </script>
</body>
</html>

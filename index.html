<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Crash Pro - Realistic Economy</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --bg: #0b0e11; --card: #1e2329; --accent: #0098ea; --gold: #f3ba2f; --danger: #f6465d; }
        body { background: var(--bg); color: white; font-family: sans-serif; margin: 0; overflow: hidden; }
        .game-container { display: flex; flex-direction: column; height: 100vh; }
        
        /* –ì—Ä–∞—Ñ–∏–∫ */
        .chart-area { position: relative; flex: 1; background: #0b0e11; border-bottom: 2px solid #2b3139; }
        #multiplier { position: absolute; left: 50%; top: 40%; transform: translate(-50%, -50%); font-size: 60px; font-weight: 900; z-index: 5; }
        
        /* –ö–Ω–æ–ø–∫–∞ –ø–æ–¥–∞—Ä–∫–∞ (—Ç–µ–ø–µ—Ä—å –æ–Ω–∞ —á–∞—Å—Ç—å –º–µ—Ö–∞–Ω–∏–∫–∏) */
        #gift-claim {
            position: absolute; display: none; background: var(--gold); color: black;
            padding: 12px 20px; border-radius: 10px; font-weight: bold; z-index: 10;
            cursor: pointer; box-shadow: 0 0 20px var(--gold); border: none;
        }

        .controls { padding: 20px; background: var(--card); border-radius: 20px 20px 0 0; }
        .btn-bet { width: 100%; padding: 20px; border-radius: 12px; border: none; font-size: 20px; font-weight: bold; background: #0ecb81; cursor: pointer; }
        
        .inv-title { padding: 10px 20px; font-size: 12px; color: #9299a6; }
        .inventory { display: flex; gap: 10px; overflow-x: auto; padding: 0 20px 20px; }
        .gift-card { background: #2b3139; padding: 10px; border-radius: 8px; min-width: 100px; text-align: center; font-size: 11px; border: 1px solid var(--gold); }
    </style>
</head>
<body>

<div class="game-container">
    <div style="padding: 15px; font-weight: bold;">–ë–∞–ª–∞–Ω—Å: <span id="balance" style="color:#0ecb81">1000.00</span> TON</div>
    
    <div class="chart-area">
        <div id="multiplier">x1.00</div>
        <button id="gift-claim" onclick="claimGiftAndCashout()">üéÅ –ó–ê–ë–†–ê–¢–¨ <span id="gift-name"></span></button>
        <canvas id="chart"></canvas>
    </div>

    <div class="controls">
        <input type="number" id="betInput" value="10" style="width:100%; background:#2b3139; border:none; color:white; padding:15px; border-radius:10px; margin-bottom:15px; font-size:18px;">
        <button class="btn-bet" id="mainBtn" onclick="handleAction()">–°–¢–ê–í–ö–ê</button>
    </div>

    <div class="inv-title">–í–ê–®–ò –¶–ï–ù–ù–´–ï –ü–†–ï–î–ú–ï–¢–´:</div>
    <div class="inventory" id="inventory"></div>
</div>

<script>
    // –ë–∞–∑–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏ (–∏–∫—Å—É)
    const gifts = [
        {n: "Lunar Snake", p: 3.08, minX: 1.5}, {n: "Pet Snake", p: 3.64, minX: 2.0},
        {n: "Santa Hat", p: 4.62, minX: 3.0}, {n: "UFC Strike", p: 12.27, minX: 8.0},
        {n: "Khabib's Papakha", p: 22.41, minX: 15.0}, {n: "Swiss Watch", p: 43.07, minX: 30.0},
        {n: "Diamond Ring", p: 605.00, minX: 200.0}, {n: "Heart Locket", p: 1474.00, minX: 500.0},
        {n: "Plush Pepe", p: 6033.50, minX: 1500.0}
    ];

    let bal = 1000.0, x = 1.0, isPlay = false, loop, crash, currentGift = null;

    const ctx = document.getElementById('chart').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'line',
        data: { labels: [0], datasets: [{ data: [1], borderColor: '#0098ea', borderWidth: 3, pointRadius: 0, fill: true, backgroundColor: 'rgba(0,152,234,0.1)' }] },
        options: { responsive: true, maintainAspectRatio: false, scales: { x: { display: false }, y: { display: false, min: 1, max: 10 } }, animation: false }
    });

    function handleAction() {
        if (!isPlay) start(); else cashout();
    }

    function start() {
        let b = parseFloat(document.getElementById('betInput').value);
        if (bal < b) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ TON");
        
        bal -= b; updateUI();
        isPlay = true; x = 1.0; currentGift = null;
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä–∞—à–∞ (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è: —á–∞—â–µ –º–∞–ª–µ–Ω—å–∫–∏–µ, —Ä–µ–¥–∫–æ ‚Äî –æ–≥—Ä–æ–º–Ω—ã–µ)
        crash = (1 / (1 - Math.random())).toFixed(2); 
        if (crash > 50) crash = (Math.random() * 50 + 10).toFixed(2); // –û–≥—Ä–∞–Ω–∏—á–∏–º –¥–ª—è —Ç–µ—Å—Ç–∞

        document.getElementById('mainBtn').innerText = "–í–´–í–ï–°–¢–ò (CASH OUT)";
        document.getElementById('gift-claim').style.display = 'none';

        loop = setInterval(() => {
            x += x * 0.01; // –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–æ—Å—Ç–∞
            document.getElementById('multiplier').innerText = `x${x.toFixed(2)}`;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞: –≤—ã–ø–∞–¥–∞–µ—Ç –ª–∏ –ø–æ–¥–∞—Ä–æ–∫ –Ω–∞ —ç—Ç–æ–º –∏–∫—Å–µ?
            let availableGifts = gifts.filter(g => x >= g.minX && x < g.minX + 0.5);
            if (availableGifts.length > 0 && !currentGift) {
                currentGift = availableGifts[0];
                showGiftButton(currentGift);
            }

            chart.data.labels.push("");
            chart.data.datasets[0].data.push(x);
            chart.update();

            if (x >= crash) end(true);
        }, 100);
    }

    function showGiftButton(g) {
        const btn = document.getElementById('gift-claim');
        btn.style.display = 'block';
        document.getElementById('gift-name').innerText = g.n;
        btn.style.left = '30%'; btn.style.top = '25%';
    }

    // –ì–õ–ê–í–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ï—Å–ª–∏ –∑–∞–±—Ä–∞–ª –ø–æ–¥–∞—Ä–æ–∫ ‚Äî —Å—Ç–∞–≤–∫–∞ –ù–ï —É–º–Ω–æ–∂–∞–µ—Ç—Å—è. –¢—ã –ø–æ–ª—É—á–∏–ª –≤–µ—â—å.
    function claimGiftAndCashout() {
        if (!isPlay) return;
        addInv(currentGift);
        alert(`–í—ã –∑–∞–±—Ä–∞–ª–∏ –ø—Ä–µ–¥–º–µ—Ç: ${currentGift.n}! –°—Ç–∞–≤–∫–∞ –∑–∞–∫—Ä—ã—Ç–∞.`);
        end(false);
    }

    function cashout() {
        let b = parseFloat(document.getElementById('betInput').value);
        bal += b * x;
        end(false);
    }

    function end(isCrash) {
        clearInterval(loop);
        isPlay = false;
        document.getElementById('gift-claim').style.display = 'none';
        if (isCrash) document.getElementById('multiplier').innerText = "–ö–†–ê–®!";
        document.getElementById('mainBtn').innerText = "–°–¢–ê–í–ö–ê";
        updateUI();
    }

    function addInv(g) {
        const inv = document.getElementById('inventory');
        inv.innerHTML += `<div class="gift-card">üéÅ ${g.n}<br><b>${g.p} TON</b></div>`;
    }

    function updateUI() { document.getElementById('balance').innerText = bal.toFixed(2); }
</script>
</body>
</html>



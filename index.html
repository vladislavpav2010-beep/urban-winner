<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Crash TON Ultimate</title>
    <style>
        :root {
            --bg: #0d1012;
            --card: #181c1f;
            --blue: #007aff;
            --green: #28a745;
            --red: #dc3545;
            --text-sec: #848e9c;
            --border: #2b3139;
            --modal-bg: #1c1c1e; /* –¢–µ–º–Ω–µ–µ, –∫–∞–∫ –≤ Telegram */
        }
        
        * { box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; -webkit-tap-highlight-color: transparent; }
        
        body { background: var(--bg); color: white; margin: 0; overflow: hidden; display: flex; flex-direction: column; height: 100vh; }

        /* --- HEADER --- */
        .header { display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; background: var(--bg); z-index: 20; border-bottom: 1px solid var(--border); }
        .online-badge { background: rgba(40, 44, 52, 0.8); padding: 5px 12px; border-radius: 20px; color: var(--green); font-size: 13px; font-weight: 700; display: flex; align-items: center; gap: 6px; }
        .balance-box { background: var(--card); padding: 5px 5px 5px 15px; border-radius: 25px; display: flex; align-items: center; gap: 10px; border: 1px solid var(--border); }
        .add-btn { width: 28px; height: 28px; background: var(--blue); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 18px; cursor: pointer; color: white; }

        /* --- PAGES --- */
        .page { flex: 1; display: none; flex-direction: column; overflow-y: auto; padding-bottom: 80px; }
        .page.active { display: flex; }

        /* --- GAME VISUALS --- */
        .game-container { position: relative; height: 320px; width: 100%; background: radial-gradient(circle at center, #1b2026 0%, #0d1012 70%); border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: center; overflow: hidden; }
        canvas { position: absolute; inset: 0; width: 100%; height: 100%; }
        .multiplier { font-size: 64px; font-weight: 900; text-shadow: 0 5px 20px rgba(0,0,0,0.5); }
        .multiplier.crashed { color: var(--red); }
        
        .history-row { display: flex; gap: 8px; padding: 10px 16px; overflow-x: auto; border-bottom: 1px solid var(--border); }
        .hist-item { padding: 4px 10px; background: var(--card); border-radius: 6px; font-size: 12px; font-weight: 700; color: var(--text-sec); border: 1px solid var(--border); }

        /* --- CONTROLS --- */
        .controls-area { padding: 16px; }
        .bet-btn { width: 100%; height: 56px; border: none; border-radius: 14px; background: var(--blue); color: white; font-size: 18px; font-weight: 800; cursor: pointer; }
        .bet-btn.cashout { background: var(--green); }

        /* --- MODAL (TABS SYSTEM) --- */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 100; display: none; justify-content: center; align-items: flex-end; backdrop-filter: blur(5px); }
        .modal-box { background: var(--modal-bg); width: 100%; border-radius: 24px 24px 0 0; padding: 20px; text-align: center; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        
        .modal-handle { width: 40px; height: 4px; background: #3a3a3c; border-radius: 2px; margin: 0 auto 15px; }
        .modal-title { font-size: 20px; font-weight: 700; margin-bottom: 20px; }

        .tabs-header { display: flex; background: #2c2c2e; border-radius: 12px; padding: 4px; margin-bottom: 20px; }
        .tab-btn { flex: 1; padding: 8px 0; font-size: 13px; font-weight: 600; color: var(--text-sec); border-radius: 10px; cursor: pointer; }
        .tab-btn.active { background: var(--blue); color: white; }

        .tab-content { display: none; text-align: left; }
        .tab-content.active { display: block; }

        .step-row { display: flex; gap: 12px; margin-bottom: 16px; align-items: center; }
        .step-num { background: #2c2c2e; width: 28px; height: 28px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 14px; }
        
        .wallet-input-container { text-align: center; padding: 20px 0; }
        .amount-input { background: none; border: none; color: white; font-size: 42px; width: 100%; text-align: center; outline: none; font-weight: 700; }
        .amount-input::placeholder { color: #3a3a3c; }
        
        .address-box { background: #15181c; padding: 10px; border-radius: 10px; font-family: monospace; font-size: 11px; color: var(--text-sec); word-break: break-all; margin-bottom: 15px; border: 1px dashed #3a404a; }

        .main-action-btn { width: 100%; height: 52px; background: var(--blue); border-radius: 14px; border: none; color: white; font-size: 16px; font-weight: 700; cursor: pointer; margin-top: 10px; }

        /* --- FOOTER --- */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: #16191e; border-top: 1px solid var(--border); display: flex; justify-content: space-around; padding: 10px 0 25px; z-index: 50; }
        .nav-item { text-align: center; color: var(--text-sec); font-size: 10px; cursor: pointer; }
        .nav-item.active { color: var(--blue); }
        .nav-item svg { width: 24px; height: 24px; margin-bottom: 4px; }

    </style>
</head>
<body>

<div class="header">
    <div class="online-badge">‚óè <span id="online-count">134</span></div>
    <div class="balance-box">
        <span id="balance-display">0.00</span>
        <div class="add-btn" onclick="openPaymentModal()">+</div>
    </div>
</div>

<div id="page-game" class="page active">
    <div class="game-container">
        <canvas id="graphCanvas"></canvas>
        <div style="position:relative; z-index:5; text-align:center;">
            <div class="multiplier" id="multiplier-text">1.00x</div>
            <div id="status-text" style="color:var(--text-sec); font-size:14px; font-weight:600; text-transform:uppercase;">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
        </div>
    </div>
    <div class="history-row" id="history-row"></div>
    <div class="controls-area">
        <button class="bet-btn" id="action-btn">–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É (10.00)</button>
    </div>
    <div id="players-list" style="padding: 0 16px;"></div>
</div>

<div id="page-profile" class="page">
    <div style="padding: 24px 16px; display: flex; gap: 15px;">
        <div style="width:64px; height:64px; background:var(--green); border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:24px; font-weight:bold;">U</div>
        <div>
            <h2 style="margin:0;">User</h2>
            <div style="background:var(--card); padding:4px 8px; border-radius:6px; font-size:12px; margin-top:5px; border:1px solid var(--border);">üíé TON Holder</div>
        </div>
    </div>
    <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; padding:0 16px;">
        <button class="main-action-btn" onclick="openPaymentModal()">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
        <button class="main-action-btn" style="background:var(--card)">–ù–∞–≥—Ä–∞–¥—ã</button>
    </div>
</div>

<div class="modal-overlay" id="payment-modal" onclick="closePaymentModal()">
    <div class="modal-box" onclick="event.stopPropagation()">
        <div class="modal-handle"></div>
        <div class="modal-title">–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–∞</div>
        
        <div class="tabs-header">
            <div class="tab-btn active" id="tab-gift" onclick="switchTab('gift')">–ü–æ–¥–∞—Ä–∫–∏</div>
            <div class="tab-btn" id="tab-wallet" onclick="switchTab('wallet')">–ö–æ—à–µ–ª–µ–∫</div>
            <div class="tab-btn">–ó–≤–µ–∑–¥—ã</div>
        </div>

        <div id="content-gift" class="tab-content active">
            <div class="step-row">
                <div class="step-num">1.</div>
                <div style="font-size:14px;">–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ—Ñ–∏–ª—å <a href="https://t.me/GiftUpRelayer" style="color:var(--blue); text-decoration:none;">@GiftUpRelayer</a></div>
            </div>
            <div class="step-row">
                <div class="step-num">2.</div>
                <div style="font-size:14px;">–û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–π –ø–æ–¥–∞—Ä–æ–∫ –±–æ—Ç—É</div>
            </div>
            <div class="step-row">
                <div class="step-num">üéÅ</div>
                <div style="font-size:14px; color:var(--text-sec);">–ë–∞–ª–∞–Ω—Å –∑–∞—á–∏—Å–ª–∏—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏</div>
            </div>
            <button class="main-action-btn" onclick="window.open('https://t.me/GiftUpRelayer')">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</button>
        </div>

        <div id="content-wallet" class="tab-content">
            <div class="wallet-input-container">
                <div style="color:var(--text-sec); font-size:12px; margin-bottom:5px;">–í–ê–® –ê–î–†–ï–° –î–õ–Ø –ü–ï–†–ï–í–û–î–ê</div>
                <div class="address-box">UQACY26GcYX7nuL1iFd1wcDDQOubtLA90njWFRDzo-JVFrYm</div>
                <input type="number" class="amount-input" placeholder="0.00" id="deposit-amount">
                <div style="color:var(--text-sec); font-size:14px; margin-top:10px;">–°—É–º–º–∞ –≤ TON</div>
            </div>
            <div style="display:flex; gap:10px;">
                <button class="main-action-btn" style="background:#2c2c2e; flex:1;" onclick="copyWallet()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                <button class="main-action-btn" style="flex:2;" onclick="openWalletApp()">–û—Ç–∫—Ä—ã—Ç—å @wallet</button>
            </div>
            <button style="background:none; border:none; color:var(--red); width:100%; margin-top:15px; font-size:13px; cursor:pointer;" onclick="alert('–ö–æ—à–µ–ª–µ–∫ –æ—Ç–≤—è–∑–∞–Ω')">–û—Ç–≤—è–∑–∞—Ç—å –∫–æ—à–µ–ª—ë–∫</button>
        </div>
    </div>
</div>

<div class="bottom-nav">
    <div class="nav-item" onclick="setPage('top')"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l-3 6-6 1 4 4-1 6 6-3 6 3-1-6 4-4-6-1z"/></svg><div>–¢–æ–ø</div></div>
    <div class="nav-item active" onclick="setPage('game')"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.5s-6 8-6 12c0 3.3 2.7 6 6 6s6-2.7 6-6c0-4-6-12-6-12z"/></svg><div>–ö—Ä–∞—à</div></div>
    <div class="nav-item" onclick="setPage('profile')"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4zm0 2c-2.7 0-8 1.3-8 4v2h16v-2c0-2.7-5.3-4-8-4z"/></svg><div>–ü—Ä–æ—Ñ–∏–ª—å</div></div>
</div>

<script>
    const CONFIG = { wallet: "UQACY26GcYX7nuL1iFd1wcDDQOubtLA90njWFRDzo-JVFrYm" };
    let state = { balance: 100.00, bet: 10.00, gameState: 'IDLE', currentMult: 1.00, myBetPlaced: false };

    const DOM = {
        balance: document.getElementById('balance-display'),
        mult: document.getElementById('multiplier-text'),
        status: document.getElementById('status-text'),
        btn: document.getElementById('action-btn'),
        modal: document.getElementById('payment-modal'),
        canvas: document.getElementById('graphCanvas'),
        ctx: document.getElementById('graphCanvas').getContext('2d')
    };

    function updateBalanceDisplay() { DOM.balance.innerText = state.balance.toFixed(2); }

    /* --- MODAL LOGIC --- */
    function openPaymentModal() { DOM.modal.style.display = 'flex'; }
    function closePaymentModal() { DOM.modal.style.display = 'none'; }
    
    function switchTab(tab) {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        document.getElementById(`tab-${tab}`).classList.add('active');
        document.getElementById(`content-${tab}`).classList.add('active');
    }

    function copyWallet() {
        navigator.clipboard.writeText(CONFIG.wallet);
        alert("–ê–¥—Ä–µ—Å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!");
    }

    function openWalletApp() {
        // –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ @wallet –≤ Telegram
        window.open('https://t.me/wallet/start?startapp=ton_transfer', '_blank');
    }

    /* --- GAME LOGIC (BASIC) --- */
    function init() {
        updateBalanceDisplay();
        resizeCanvas();
        startCycle();
        setInterval(() => { document.getElementById('online-count').innerText = 100 + Math.floor(Math.random()*50); }, 5000);
    }

    function startCycle() {
        state.gameState = 'IDLE';
        DOM.mult.style.color = 'white';
        let countdown = 3;
        const timer = setInterval(() => {
            DOM.mult.innerText = countdown;
            countdown--;
            if(countdown < 0) { clearInterval(timer); startGame(); }
        }, 1000);
    }

    function startGame() {
        state.gameState = 'FLYING';
        let start = Date.now();
        let crashAt = 1 + Math.random() * 4;
        function frame() {
            if(state.gameState !== 'FLYING') return;
            let elapsed = (Date.now() - start) / 1000;
            state.currentMult = Math.pow(Math.E, 0.15 * elapsed);
            DOM.mult.innerText = state.currentMult.toFixed(2) + "x";
            drawGraph(elapsed);
            if(state.currentMult >= crashAt) {
                state.gameState = 'CRASHED';
                DOM.mult.style.color = '#dc3545';
                setTimeout(startCycle, 3000);
            } else { requestAnimationFrame(frame); }
        }
        frame();
    }

    function resizeCanvas() { DOM.canvas.width = DOM.canvas.offsetWidth; DOM.canvas.height = DOM.canvas.offsetHeight; }
    function drawGraph(t) {
        let w = DOM.canvas.width, h = DOM.canvas.height;
        DOM.ctx.clearRect(0,0,w,h);
        DOM.ctx.beginPath();
        DOM.ctx.strokeStyle = '#007bff'; DOM.ctx.lineWidth = 4;
        DOM.ctx.moveTo(0, h);
        DOM.ctx.quadraticCurveTo(w*0.2, h, Math.min(w*0.9, t*50), h - Math.min(h*0.8, t*t*10));
        DOM.ctx.stroke();
    }

    function setPage(p) {
        document.querySelectorAll('.page').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        document.getElementById(`page-${p}`).classList.add('active');
        if(p === 'game') document.querySelectorAll('.nav-item')[1].classList.add('active');
        if(p === 'profile') document.querySelectorAll('.nav-item')[2].classList.add('active');
    }

    window.addEventListener('resize', resizeCanvas);
    init();
</script>
</body>
</html>


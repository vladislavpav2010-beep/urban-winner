<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crash Demo Smart</title>

<style>
body{
  margin:0;
  font-family:system-ui,Arial;
  background:#07090f;
  color:#fff;
}

.wrapper{
  padding:16px;
  max-width:1000px;
  margin:0 auto;
}

/* HEADER */
.header{
  display:flex;
  justify-content:space-between;
  margin-bottom:12px;
}
.balance{
  background:#141a22;
  padding:8px 16px;
  border-radius:30px;
  font-weight:700;
}

/* GAME */
.game{
  width:1000px;
  height:260px;
  border-radius:22px;
  background:radial-gradient(circle at top,#1a2450,#07090f);
  position:relative;
  overflow:hidden;
}

.mult{
  position:absolute;
  top:38%;
  width:100%;
  text-align:center;
  font-size:48px;
  font-weight:900;
}

/* ROCKET */
.rocket{
  position:absolute;
  width:26px;
  height:52px;
  left:30px;
  bottom:30px;
  background:linear-gradient(#fff,#cfd6ff);
  clip-path:polygon(50% 0,100% 20%,80% 100%,20% 100%,0 20%);
  transition:left 0.05s linear, bottom 0.05s linear;
}
.fire{
  position:absolute;
  bottom:-20px;
  left:50%;
  transform:translateX(-50%);
  width:16px;
  height:24px;
  background:linear-gradient(180deg,#ffb300,#ff4d00);
  border-radius:50%;
  filter:blur(1px);
  animation:fire .2s infinite alternate;
}
@keyframes fire{
  from{height:18px} to{height:28px}
}

/* CONTROLS */
.controls{
  margin-top:16px;
}
button{
  width:100%;
  height:52px;
  border:none;
  border-radius:14px;
  background:#3aa3ff;
  font-size:16px;
  font-weight:800;
}
button.take{
  background:#2de38c;
  color:#000;
}
button:disabled{
  opacity:.5;
}
.history{
  margin-top:12px;
  display:flex;
  gap:6px;
  overflow-x:auto;
}
.hist{
  background:#1b1b1b;
  padding:6px 10px;
  border-radius:10px;
  font-size:13px;
}
</style>
</head>

<body>
<div class="wrapper">

  <div class="header">
    <div>üöÄ Crash Demo</div>
    <div class="balance">üíé <span id="bal">1000.00</span></div>
  </div>

  <div class="game">
    <div class="mult" id="mult">x1.00</div>
    <div class="rocket" id="rocket">
      <div class="fire"></div>
    </div>
  </div>

  <div class="controls">
    <input id="bet" type="number" placeholder="–°—É–º–º–∞ —Å—Ç–∞–≤–∫–∏"
      style="width:100%; margin-bottom:8px; padding:10px; border-radius:10px; border:none; background:#141a22; color:#fff;">
    <input id="auto" type="number" step="0.01" placeholder="–ê–≤—Ç–æ–≤—ã–≤–æ–¥ x"
      style="width:100%; margin-bottom:8px; padding:10px; border-radius:10px; border:none; background:#141a22; color:#fff;">
    <button id="btn">–°–î–ï–õ–ê–¢–¨ –°–¢–ê–í–ö–£</button>
  </div>

  <div class="history" id="history"></div>
</div>

<script>
let bal = 1000;
let state = 'WAIT';
let x = 1;
let crashPoint = 0;
let timer = null;
let currentBet = 0;
let hasTaken = false;

const mult = document.getElementById('mult');
const rocket = document.getElementById('rocket');
const btn = document.getElementById('btn');
const betInput = document.getElementById('bet');
const autoInput = document.getElementById('auto');
const historyEl = document.getElementById('history');

function updateBalance(){
  document.getElementById('bal').innerText = bal.toFixed(2);
}

function startRound(){
  if(state !== 'WAIT') return;
  currentBet = parseFloat(betInput.value);
  if(!currentBet || currentBet > bal){
    alert('–ù–µ–≤–µ—Ä–Ω–∞—è —Å—Ç–∞–≤–∫–∞');
    return;
  }

  bal -= currentBet;
  updateBalance();
  x = 1;
  hasTaken = false;
  state = 'FLY';

  crashPoint = (Math.random()*9 + 1.1).toFixed(2);

  btn.innerText = '–ó–ê–ë–†–ê–¢–¨';
  btn.classList.add('take');

  timer = setInterval(fly,50);
}

function fly(){
  x += x * 0.012;
  if(x >= crashPoint){
    crash();
    return;
  }

  if(autoInput.value && x >= parseFloat(autoInput.value) && !hasTaken){
    take();
  }

  mult.innerText = 'x' + x.toFixed(2);
  rocket.style.left = 30 + x * 25 + 'px';
  rocket.style.bottom = 30 + x * 12 + 'px';
}

function take(){
  if(hasTaken || state !== 'FLY') return;
  hasTaken = true;
  bal += currentBet * x;
  updateBalance();
}

function crash(){
  clearInterval(timer);
  mult.innerText = 'x' + crashPoint;
  addHistory(crashPoint);
  state = 'WAIT';
  btn.innerText = '–°–î–ï–õ–ê–¢–¨ –°–¢–ê–í–ö–£';
  btn.classList.remove('take');
  rocket.style.left = '30px';
  rocket.style.bottom = '30px';
}

function addHistory(val){
  const d = document.createElement('div');
  d.className = 'hist';
  d.innerText = 'x' + parseFloat(val).toFixed(2);
  historyEl.prepend(d);
  if(historyEl.children.length > 10){
    historyEl.removeChild(historyEl.lastChild);
  }
}

btn.onclick = () => {
  if(state === 'WAIT') startRound();
  else take();
};

updateBalance();
</script>
</body>
</html>

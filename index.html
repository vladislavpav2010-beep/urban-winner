<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CircleGift PvP Pro</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        :root {
            --bg: #0f0f13; --card: #1c1c24; --accent: #ffc107;
            --p1: #3600ff; --p2: #d9006c; --p3: #b05cff; --p4: #9d4edd; --me: #0098ea;
        }
        * { box-sizing: border-box; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; background: var(--bg); color: #fff; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        /* Header & Banners */
        .header { padding: 12px 16px; display: flex; flex-direction: column; align-items: center; gap: 8px; }
        .banner { width: 100%; background: linear-gradient(90deg, #d9006c, #8a2be2); padding: 12px; border-radius: 12px; text-align: center; font-weight: 900; text-transform: uppercase; font-size: 13px; letter-spacing: 0.5px; }
        .pool-badge { background: #23232d; padding: 6px 18px; border-radius: 20px; font-weight: 800; font-size: 13px; color: #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }

        /* Wheel Section */
        .wheel-area { position: relative; width: 330px; height: 330px; margin: 15px auto; }
        .indicator { position: absolute; top: -10px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 14px solid transparent; border-right: 14px solid transparent; border-top: 22px solid #fff; z-index: 10; filter: drop-shadow(0 2px 4px #000); }
        .wheel-outer { width: 100%; height: 100%; border-radius: 50%; transition: transform 9s cubic-bezier(0.1, 0, 0.15, 1); will-change: transform; }
        canvas { width: 100%; height: 100%; }
        
        .center-hub { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 115px; height: 115px; background: var(--bg); border-radius: 50%; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 5; box-shadow: inset 0 0 20px #000; }
        #timer { font-size: 34px; font-weight: 900; letter-spacing: -1px; }
        #status { font-size: 10px; font-weight: 800; color: #5c5c70; text-transform: uppercase; margin-top: -2px; }

        /* Buttons & Profile */
        .actions { padding: 0 16px 12px; display: flex; gap: 10px; }
        .btn { flex: 1; height: 56px; border-radius: 14px; border: none; font-weight: 900; font-size: 15px; cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .btn-yellow { background: var(--accent); color: #000; }
        .btn-dark { background: #2a2a35; color: #fff; border: 1px solid #353542; }
        .btn:active { transform: scale(0.96); }

        /* Player List */
        .list-header { padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; }
        .list-header h3 { margin: 0; font-size: 18px; font-weight: 900; }
        .balance-box { font-size: 12px; font-weight: 700; color: var(--accent); background: rgba(255,193,7,0.1); padding: 4px 10px; border-radius: 8px; }
        
        .players { flex: 1; overflow-y: auto; padding: 0 16px 20px; display: flex; flex-direction: column; gap: 8px; }
        .p-card { display: flex; align-items: center; background: var(--card); padding: 14px; border-radius: 16px; border: 1px solid #25252e; }
        .p-avatar { width: 44px; height: 44px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; color: #fff; margin-right: 12px; border: 2px solid rgba(255,255,255,0.05); }
        .p-info { flex: 1; }
        .p-name { font-weight: 700; font-size: 15px; margin-bottom: 2px; }
        .p-role { font-size: 12px; color: #6e6e7e; }
        .p-stats { text-align: right; }
        .p-perc { font-weight: 900; font-size: 16px; color: #fff; }
        .p-ton { font-size: 12px; color: #6e6e7e; font-weight: 600; }
    </style>
</head>
<body>

<div class="header">
    <div class="banner">üå∏ –°–∞–∫—É—Ä–∞ PvP —Ç—É—Ä–Ω–∏—Ä üå∏</div>
    <div class="pool-badge">–í–°–ï–ì–û <span id="total-pool">0.00</span> TON</div>
</div>

<div class="wheel-area">
    <div class="indicator"></div>
    <div class="wheel-outer" id="wheel">
        <canvas id="canvas" width="800" height="800"></canvas>
    </div>
    <div class="center-hub">
        <div id="timer">00:05</div>
        <div id="status">–î–æ –Ω–∞—á–∞–ª–∞</div>
    </div>
</div>

<div class="actions">
    <button class="btn btn-yellow" onclick="startCountdown()">+ –î–æ–±–∞–≤–∏—Ç—å –≤ PvP</button>
    <button class="btn btn-dark" onclick="placeBet()">üíé 4.1 TON</button>
</div>

<div class="list-header">
    <h3 id="p-count">0 –ò–≥—Ä–æ–∫–æ–≤</h3>
    <div class="balance-box">–ë–∞–ª–∞–Ω—Å: <span id="user-bal">10.00</span> TON</div>
</div>

<div class="players" id="list"></div>

<script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (–∫–∞–∫ –≤ —Ç–≤–æ–∏—Ö —Ñ–∞–π–ª–∞—Ö)
    let balance = 10.00;
    let players = [
        { name: '@essieem', bet: 36.48, color: '#3600ff' },
        { name: '@sonya', bet: 4.23, color: '#d9006c' },
        { name: '@tripochek', bet: 1.00, color: '#b05cff' },
        { name: '@yuccca1', bet: 0.83, color: '#9d4edd' }
    ];

    let spinning = false;
    let rotation = 0;
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    function sync() {
        const total = players.reduce((s, p) => s + p.bet, 0);
        document.getElementById('total-pool').textContent = total.toFixed(2);
        document.getElementById('p-count').textContent = players.length + ' –ò–≥—Ä–æ–∫–æ–≤';
        document.getElementById('user-bal').textContent = balance.toFixed(2);

        let currentAngle = 0;
        players.forEach(p => {
            p.chance = p.bet / total;
            p.startA = currentAngle;
            p.endA = currentAngle + (p.chance * Math.PI * 2);
            currentAngle = p.endA;
        });
        draw();
        render();
    }

    function draw() {
        const r = canvas.width / 2;
        ctx.clearRect(0,0,800,800);
        ctx.save();
        ctx.translate(r, r);
        ctx.rotate(-Math.PI/2);

        players.forEach(p => {
            ctx.beginPath();
            ctx.moveTo(0,0);
            ctx.arc(0,0, r, p.startA, p.endA);
            ctx.fillStyle = p.color;
            ctx.fill();
            ctx.strokeStyle = '#0f0f13';
            ctx.lineWidth = 6;
            ctx.stroke();

            // –ê–≤–∞—Ç–∞—Ä–∫–∏ –Ω–∞ –∫–æ–ª–µ—Å–µ (–±–µ–ª—ã–µ –∫—Ä—É–≥–∏ —Å –±—É–∫–≤–æ–π)
            ctx.save();
            const mid = p.startA + (p.endA - p.startA)/2;
            ctx.rotate(mid);
            ctx.translate(r * 0.72, 0);
            ctx.rotate(Math.PI/2 - mid);
            ctx.beginPath();
            ctx.arc(0,0, 32, 0, Math.PI*2);
            ctx.fillStyle = '#fff';
            ctx.fill();
            ctx.fillStyle = '#000';
            ctx.font = '900 32px Inter';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(p.name[1].toUpperCase(), 0, 2);
            ctx.restore();
        });
        ctx.restore();
    }

    function render() {
        const container = document.getElementById('list');
        container.innerHTML = players.sort((a,b)=>b.bet-a.bet).map(p => `
            <div class="p-card">
                <div class="p-avatar" style="background:${p.color}">${p.name[1].toUpperCase()}</div>
                <div class="p-info">
                    <div class="p-name">${p.name}</div>
                    <div class="p-role">–ò–≥—Ä–æ–∫</div>
                </div>
                <div class="p-stats">
                    <div class="p-perc">${(p.chance*100).toFixed(2)}%</div>
                    <div class="p-ton">${p.bet.toFixed(2)} TON</div>
                </div>
            </div>
        `).join('');
    }

    function placeBet() {
        if(spinning || balance < 4.1) return;
        balance -= 4.1; // –°–ø–∏—Å–∞–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
        let me = players.find(p => p.name === '@–¢–´');
        if(me) me.bet += 4.1;
        else players.push({ name: '@–¢–´', bet: 4.1, color: '#0098ea' });
        sync();
    }

    function startCountdown() {
        if(spinning) return;
        let count = 5;
        const t = document.getElementById('timer');
        const s = document.getElementById('status');
        
        const timerId = setInterval(() => {
            count--;
            t.textContent = `00:0${count}`;
            if(count <= 0) {
                clearInterval(timerId);
                go();
            }
        }, 1000);
    }

    function go() {
        spinning = true;
        document.getElementById('status').textContent = "PvP –Ω–∞—á–∞–ª—Å—è";
        document.getElementById('timer').textContent = "–ò–ì–†–ê";
        document.getElementById('timer').style.color = "#0ecb81";

        const total = players.reduce((s, p) => s + p.bet, 0);
        const winVal = Math.random() * total;
        let acc = 0;
        let winner = players[0];
        for(let p of players) {
            acc += p.bet;
            if(winVal <= acc) { winner = p; break; }
        }

        const winMidDeg = ((winner.startA + winner.endA) / 2) * (180 / Math.PI);
        const randomShift = (Math.random() - 0.5) * 15;
        
        // –ú–æ—â–Ω–∞—è —Ñ–∏–∑–∏–∫–∞: 10 –æ–±–æ—Ä–æ—Ç–æ–≤ + —Ü–µ–ª–µ–≤–æ–π —Å–µ–∫—Ç–æ—Ä
        rotation += (360 * 10) + (360 - winMidDeg) + randomShift;
        document.getElementById('wheel').style.transform = `rotate(${rotation}deg)`;

        setTimeout(() => {
            spinning = false;
            alert(`üéâ –ü–æ–±–µ–¥–∏–ª ${winner.name}! –í—ã–∏–≥—Ä—ã—à: ${total.toFixed(2)} TON`);
            document.getElementById('timer').textContent = "00:05";
            document.getElementById('timer').style.color = "#fff";
            document.getElementById('status').textContent = "–î–æ –Ω–∞—á–∞–ª–∞";
        }, 9200); // –í—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏ —á—É—Ç—å –±–æ–ª—å—à–µ –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
    }

    sync();
</script>
</body>
</html>





<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>TON ROLLS PRO - FULL EDITION</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        /* –¢–í–û–ò –û–†–ò–ì–ò–ù–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò–ó index(7).html */
        :root {
            --bg-main: #0a0b0c;
            --bg-card: #141619;
            --accent: #43d4fb;
            --accent-gradient: linear-gradient(90deg, #43d4fb 0%, #29a9ea 100%);
            --text-primary: #ffffff;
            --text-secondary: #7e838a;
            --border: #1f2226;
            --red: #ff4d4d;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; user-select: none; }
        body { background: var(--bg-main); color: var(--text-primary); height: 100vh; overflow: hidden; }

        /* HEADER */
        .header {
            padding: 15px 20px; display: flex; justify-content: space-between; align-items: center;
            background: rgba(10, 11, 12, 0.8); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 100;
        }
        .header-title { font-size: 18px; font-weight: 900; letter-spacing: -0.5px; }
        .online-count { font-size: 12px; color: var(--accent); display: flex; align-items: center; gap: 4px; }
        .online-dot { width: 6px; height: 6px; background: var(--accent); border-radius: 50%; box-shadow: 0 0 5px var(--accent); }

        .balance-group { display: flex; align-items: center; background: var(--bg-card); padding: 5px 5px 5px 12px; border-radius: 12px; border: 1px solid var(--border); gap: 8px; }
        .bal-val { font-weight: 800; font-size: 15px; }
        .bal-add { background: #26292e; width: 28px; height: 28px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 18px; color: #fff; cursor: pointer; }

        /* CONTENT */
        .content { height: calc(100vh - 140px); overflow-y: auto; padding: 15px; }
        .screen { display: none; }
        .screen.active { display: block; }

        /* –¢–í–û–ò –ö–ù–û–ü–ö–ò */
        .btn-main {
            background: var(--accent-gradient); color: #000; border: none; width: 100%; padding: 18px;
            border-radius: 20px; font-size: 16px; font-weight: 800; text-transform: none; cursor: pointer;
            box-shadow: 0 4px 15px rgba(67, 212, 251, 0.3); transition: 0.2s; margin-top: 10px;
        }
        .btn-main:disabled { opacity: 0.5; cursor: not-allowed; }

        /* –ö–†–£–ì –ò–ó –°–ö–†–ò–ù–®–û–¢–ê 1000045845.jpg */
        .up-circle-wrap { position: relative; width: 200px; height: 200px; margin: 0 auto 20px; }
        .up-progress { 
            fill: none; 
            stroke: var(--accent); 
            stroke-width: 12; 
            stroke-dasharray: 282.7; 
            stroke-dashoffset: 140; 
            stroke-linecap: round; 
            transition: stroke-dashoffset 0.3s ease; 
        }
        .up-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 20px; }
        .up-btn { 
            background: var(--bg-card); border: 1px solid var(--border); padding: 12px; 
            border-radius: 12px; color: var(--text-secondary); font-weight: 800; cursor: pointer; 
        }
        .up-btn.active { background: var(--accent); color: #000; border-color: var(--accent); }

        /* –ö–ê–†–¢–û–ß–ö–ê –ü–†–ï–í–¨–Æ (1000045745.jpg style) */
        .game-preview-card {
            background: var(--bg-card); border-radius: 30px; border: 1px solid var(--border);
            padding: 30px 20px; text-align: center; margin-bottom: 20px; position: relative;
        }

        /* PVP WHEEL */
        .wheel-box { position: relative; width: 240px; height: 240px; margin: 0 auto 20px; }
        #wheelCanvas { width: 100%; height: 100%; transform: rotate(-90deg); border-radius: 50%; }
        .wheel-arrow {
            position: absolute; top: -10px; left: 50%; transform: translateX(-50%);
            width: 0; height: 0; border-left: 10px solid transparent; border-right: 10px solid transparent;
            border-top: 15px solid #fff; z-index: 10;
        }

        /* –ß–ò–ü–´ –°–¢–ê–í–û–ö */
        .bet-chips { display: flex; gap: 8px; overflow-x: auto; margin-bottom: 20px; padding-bottom: 5px; scrollbar-width: none; }
        .chip {
            background: #1c1f24; border: 1px solid var(--border); padding: 10px 18px;
            border-radius: 14px; font-size: 14px; font-weight: 700; color: var(--text-secondary); white-space: nowrap; cursor: pointer;
        }
        .chip.active { background: #26292e; color: #fff; border-color: var(--text-secondary); }

        /* NAV BAR */
        .nav-bar {
            position: fixed; bottom: 0; width: 100%; height: 85px; background: #0c0d0f;
            border-top: 1px solid var(--border); display: flex; padding: 0 10px 20px; z-index: 100;
        }
        .nav-item {
            flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: var(--text-secondary); font-size: 10px; font-weight: 600; gap: 5px; cursor: pointer;
        }
        .nav-item.active { color: #fff; }
        .nav-icon { width: 24px; height: 24px; opacity: 0.5; }
        .nav-item.active .nav-icon { opacity: 1; filter: drop-shadow(0 0 5px var(--accent)); }

        /* PROFILE */
        .user-avatar { 
            width: 50px; height: 50px; background: #5edb6d; border-radius: 50%; 
            margin: 0 auto 10px; display: flex; align-items: center; justify-content: center;
            font-size: 20px; font-weight: 800; color: #000;
        }
        .inventory-box { background: var(--bg-card); border-radius: 24px; padding: 20px; border: 1px solid var(--border); }

        /* SECRET BUTTON */
        .secret-rig { 
            opacity: 0.05; font-size: 8px; text-align: center; margin-top: 20px; cursor: pointer;
        }
        .secret-rig.active { opacity: 1; color: var(--red); font-weight: bold; }
    </style>
</head>
<body>

    <div class="header">
        <div onclick="window.location.reload()" style="cursor: pointer;">
            <div class="header-title">TON ROLLS PRO</div>
            <div class="online-count"><div class="online-dot"></div> <span id="online-val">19</span> –æ–Ω–ª–∞–π–Ω</div>
        </div>
        <div class="balance-group">
            <span class="bal-val" id="top-bal">3.07</span>
            <span style="color: var(--accent);">üíé</span>
            <div class="bal-add">+</div>
        </div>
    </div>

    <div class="content">
        <div id="scr-solo" class="screen active">
            <div class="game-preview-card">
                <div class="up-circle-wrap">
                    <svg style="width:100%; height:100%; transform:rotate(-90deg);" viewBox="0 0 100 100">
                        <circle cx="50" cy="50" r="45" fill="none" stroke="#1a1d21" stroke-width="12"/>
                        <circle id="up-progress-svg" cx="50" cy="50" r="45" class="up-progress"/>
                    </svg>
                    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);">
                        <div id="up-chance-text" style="font-size: 32px; font-weight: 900;">48%</div>
                    </div>
                </div>
                
                <div class="up-grid">
                    <button class="up-btn active" onclick="setMult(2, this)">x2</button>
                    <button class="up-btn" onclick="setMult(5, this)">x5</button>
                    <button class="up-btn" onclick="setMult(10, this)">x10</button>
                    <button class="up-btn" onclick="setMult(50, this)">x50</button>
                </div>

                <div class="bet-chips" id="solo-chips">
                    <div class="chip active" data-val="1">1 üíé</div>
                    <div class="chip" data-val="3">3 üíé</div>
                    <div class="chip" data-val="10">10 üíé</div>
                    <div class="chip" data-val="30">30 üíé</div>
                </div>

                <button class="btn-main" id="btn-upgrade" onclick="playUpgrade()">–ê–ü–ì–†–ï–ô–î</button>
            </div>
        </div>

        <div id="scr-pvp" class="screen">
            <div class="game-preview-card">
                <div style="font-size:12px; color:var(--text-secondary); margin-bottom:10px; font-weight:800;">–ë–ê–ù–ö –ò–ì–†–´: <span id="pvp-bank" style="color:var(--accent)">0.00 üíé</span></div>
                <div class="wheel-box">
                    <div class="wheel-arrow"></div>
                    <canvas id="wheelCanvas" width="500" height="500"></canvas>
                    <div id="pvp-timer" style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:24px; font-weight:900;">20</div>
                </div>
                
                <div class="bet-chips" id="pvp-chips">
                    <div class="chip active" data-val="1">1 üíé</div>
                    <div class="chip" data-val="5">5 üíé</div>
                    <div class="chip" data-val="10">10 üíé</div>
                    <div class="chip" data-val="50">50 üíé</div>
                </div>

                <button class="btn-main" id="btn-join-pvp" onclick="joinPvP()">–í–°–¢–£–ü–ò–¢–¨ –í –ë–ò–¢–í–£</button>
                <div class="secret-rig" id="rig-toggle" onclick="toggleRig()">SYSTEM_DEBUG_MODE_50X</div>
            </div>
            
            <div id="pvp-players-list" style="margin-top: 10px;"></div>
        </div>

        <div id="scr-profile" class="screen">
            <div class="profile-header">
                <div class="user-avatar">B</div>
                <div style="font-size: 18px; font-weight: 800;">@Da529</div>
            </div>

            <div class="inventory-box">
                <div style="display: flex; justify-content: space-between; font-size: 14px;">
                    <span style="font-weight: 700;">–ú–æ–π –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</span>
                    <span style="color: var(--text-secondary);">0 –ê–π—Ç–µ–º–æ–≤ ¬∑ 0 üíé</span>
                </div>
                <p style="margin-top: 20px; font-size: 12px; color: var(--text-secondary); text-align: center;">–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –∞–π—Ç–µ–º–æ–≤.</p>
            </div>
            
            <button class="btn-main" style="background: #eb4034; color: #fff; margin-top: 20px;" onclick="resetData()">–°–±—Ä–æ—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
        </div>
    </div>

    <nav class="nav-bar">
        <div class="nav-item" onclick="show('shop', this)">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/></svg>
            –ú–∞–≥–∞–∑–∏–Ω
        </div>
        <div class="nav-item" onclick="show('pvp', this)">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"/></svg>
            PvP
        </div>
        <div class="nav-item active" onclick="show('solo', this)">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 11.55C9.64 9.35 6.48 8 3 8v11c3.48 0 6.64 1.35 9 3.55 2.36-2.2 5.52-3.55 9-3.55V8c-3.48 0-6.64 1.35-9 3.55z"/></svg>
            Solo
        </div>
        <div class="nav-item" onclick="alert('Earn –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ')">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>
            Earn
        </div>
        <div class="nav-item" onclick="show('profile', this)">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            –ü—Ä–æ—Ñ–∏–ª—å
        </div>
    </nav>

    <script>
        // --- –°–û–°–¢–û–Ø–ù–ò–ï (STATE) ---
        let state = {
            bal: parseFloat(localStorage.getItem('ton_bal')) || 3.07,
            mult: 2,
            isRigged: false, // –¢–ê –°–ê–ú–ê–Ø –ü–û–î–ö–†–£–¢–ö–ê
            pvp: { players: [], timer: 20, isSpinning: false, total: 0 }
        };

        const canvas = document.getElementById('wheelCanvas');
        const ctx = canvas.getContext('2d');

        // --- –ù–ê–í–ò–ì–ê–¶–ò–Ø ---
        function show(screenId, el) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            const target = document.getElementById('scr-' + screenId);
            if(target) target.classList.add('active');
            el.classList.add('active');
        }

        // --- –õ–û–ì–ò–ö–ê UPGRADE ---
        function setMult(m, btn) {
            state.mult = m;
            document.querySelectorAll('.up-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            updateUpgradeUI();
        }

        function updateUpgradeUI() {
            const chance = (100 / state.mult) * 0.95;
            document.getElementById('up-chance-text').innerText = Math.floor(chance) + "%";
            const svgCircle = document.getElementById('up-progress-svg');
            const offset = 282.7 - (282.7 * (chance / 100));
            svgCircle.style.strokeDashoffset = offset;
        }

        function playUpgrade() {
            const bet = parseFloat(document.querySelector('#solo-chips .chip.active').dataset.val);
            if(state.bal < bet) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ üíé");
            
            state.bal -= bet;
            updateUI();
            
            document.getElementById('btn-upgrade').disabled = true;
            
            setTimeout(() => {
                const chance = (100 / state.mult) * 0.95;
                const win = Math.random() * 100 <= chance;
                
                if(win) {
                    const winAmt = bet * state.mult;
                    state.bal += winAmt;
                    alert(`–£—Å–ø–µ—Ö! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${winAmt.toFixed(2)} üíé`);
                } else {
                    alert("–ù–µ—É–¥–∞—á–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!");
                }
                
                document.getElementById('btn-upgrade').disabled = false;
                updateUI();
            }, 500);
        }

        // --- –õ–û–ì–ò–ö–ê PVP ---
        function toggleRig() {
            state.isRigged = !state.isRigged;
            document.getElementById('rig-toggle').classList.toggle('active');
            console.log("Rigged mode:", state.isRigged);
        }

        function drawPvPWheel() {
            const r = canvas.width / 2;
            ctx.clearRect(0,0,500,500);
            
            if(state.pvp.players.length === 0) {
                ctx.beginPath(); ctx.arc(r,r,r-10,0,Math.PI*2);
                ctx.fillStyle = '#1c1f24'; ctx.fill();
                return;
            }

            let currentAngle = 0;
            state.pvp.players.forEach(p => {
                const sliceAngle = (p.bet / state.pvp.total) * 2 * Math.PI;
                ctx.beginPath(); ctx.moveTo(r,r);
                ctx.arc(r,r,r-5,currentAngle, currentAngle + sliceAngle);
                ctx.fillStyle = p.color; ctx.fill();
                currentAngle += sliceAngle;
            });
        }

        function joinPvP() {
            const bet = parseFloat(document.querySelector('#pvp-chips .chip.active').dataset.val);
            if(state.bal < bet) return alert("–ú–∞–ª–æ üíé");
            
            state.bal -= bet;
            state.pvp.total += bet;
            state.pvp.players.push({ name: "–í—ã", bet: bet, color: "#43d4fb" });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –±–æ—Ç–∞ —á–µ—Ä–µ–∑ —Å–µ–∫—É–Ω–¥—É –¥–ª—è –≤–∏–¥–∞
            setTimeout(() => {
                const botBet = bet * 1.5;
                state.pvp.total += botBet;
                state.pvp.players.push({ name: "@bot_ton", bet: botBet, color: "#ff4d4d" });
                renderPvPList();
                drawPvPWheel();
            }, 800);

            updateUI();
            renderPvPList();
            drawPvPWheel();
        }

        function renderPvPList() {
            document.getElementById('pvp-bank').innerText = state.pvp.total.toFixed(2) + " üíé";
            const list = document.getElementById('pvp-players-list');
            list.innerHTML = state.pvp.players.map(p => `
                <div style="display:flex; justify-content:space-between; padding:10px; background:var(--bg-card); border-radius:12px; margin-bottom:5px; border:1px solid var(--border)">
                    <span style="font-weight:700">${p.name}</span>
                    <span style="color:var(--accent)">${p.bet.toFixed(2)} üíé</span>
                </div>
            `).join('');
        }

        setInterval(() => {
            if(state.pvp.players.length > 0 && !state.pvp.isSpinning) {
                state.pvp.timer--;
                document.getElementById('pvp-timer').innerText = state.pvp.timer;
                if(state.pvp.timer <= 0) spinPvP();
            }
        }, 1000);

        function spinPvP() {
            state.pvp.isSpinning = true;
            const extraSpins = 5 + Math.random() * 5;
            let finalRotation;

            if(state.isRigged) {
                // –ü–û–î–ö–†–£–¢–ö–ê: –ö–æ–ª–µ—Å–æ –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –ë–æ—Ç–µ (–∫—Ä–∞—Å–Ω—ã–π —Å–µ–∫—Ç–æ—Ä)
                finalRotation = 360 * extraSpins + 120; 
            } else {
                finalRotation = 360 * extraSpins + Math.random() * 360;
            }

            canvas.style.transition = "transform 4s cubic-bezier(0.15, 0, 0.15, 1)";
            canvas.style.transform = `rotate(${finalRotation}deg)`;

            setTimeout(() => {
                alert(state.isRigged ? "–ë–æ—Ç –≤—ã–∏–≥—Ä–∞–ª! –ü–æ–≤–µ–∑–µ—Ç –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑." : "–†–∞—É–Ω–¥ –æ–∫–æ–Ω—á–µ–Ω!");
                resetPvPRound();
            }, 4500);
        }

        function resetPvPRound() {
            state.pvp = { players: [], timer: 20, isSpinning: false, total: 0 };
            canvas.style.transition = "none";
            canvas.style.transform = "rotate(-90deg)";
            renderPvPList();
            drawPvPWheel();
        }

        // --- –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï ---
        function updateUI() {
            document.getElementById('top-bal').innerText = state.bal.toFixed(2);
            localStorage.setItem('ton_bal', state.bal);
        }

        function resetData() {
            if(confirm("–°–±—Ä–æ—Å–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç?")) {
                localStorage.clear();
                location.reload();
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –ø–æ —á–∏–ø–∞–º
        document.querySelectorAll('.bet-chips').forEach(container => {
            container.addEventListener('click', (e) => {
                if(e.target.classList.contains('chip')) {
                    container.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
                    e.target.classList.add('active');
                }
            });
        });

        window.onload = () => {
            updateUpgradeUI();
            updateUI();
            drawPvPWheel();
        };
    </script>
</body>
</html>


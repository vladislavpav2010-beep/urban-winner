<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Crash Ultimate 1:1</title>
    <style>
        :root {
            --bg: #0b0e11; --card: #161a1e; --accent: #0098ea;
            --green: #0ecb81; --gold: #f3ba2f; --danger: #f6465d;
            --text-main: #ffffff; --text-sec: #9299a6;
        }
        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); color: var(--text-main); font-family: 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 0; overflow: hidden; }

        /* HEADER */
        .top-nav { display: flex; justify-content: space-between; padding: 12px 16px; align-items: center; position: relative; z-index: 10; }
        .stat-item { display: flex; align-items: center; gap: 6px; font-weight: 600; font-size: 14px; }
        .dot { width: 8px; height: 8px; background: var(--green); border-radius: 50%; box-shadow: 0 0 8px var(--green); }
        .balance-chip { background: #1e2329; padding: 6px 14px; border-radius: 20px; display: flex; align-items: center; gap: 8px; font-weight: 700; }

        /* GAME ENGINE SPACE */
        .viewport { position: relative; height: 320px; width: 100%; background: radial-gradient(circle at 10% 90%, #151e29 0%, #0b0e11 100%); overflow: hidden; }
        .grid-system { position: absolute; inset: -100px; background-image: 
            linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), 
            linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
            background-size: 45px 45px; z-index: 1; }
        
        #multiplier-text { position: absolute; width: 100%; text-align: center; top: 30%; font-size: 72px; font-weight: 900; z-index: 5; pointer-events: none; }
        #rocket-node { position: absolute; bottom: 50px; left: 50px; z-index: 20; will-change: transform; display: none; }
        .rocket-svg { width: 100px; filter: drop-shadow(0 0 20px rgba(0,152,234,0.5)); }
        
        canvas#render-layer { position: absolute; inset: 0; z-index: 4; }

        /* CONTROLS */
        .panel { padding: 16px; background: var(--bg); position: relative; z-index: 10; }
        .main-button { 
            width: 100%; height: 64px; border-radius: 16px; border: none; 
            background: var(--accent); color: white; font-size: 20px; font-weight: 800; 
            cursor: pointer; transition: all 0.1s; box-shadow: 0 6px 20px rgba(0,152,234,0.3);
        }
        .main-button:active { transform: scale(0.97); }
        .main-button.waiting { background: #2b3139; color: var(--text-sec); cursor: not-allowed; }

        /* LIVE BETS TABLE */
        .table-title { padding: 0 16px 10px; color: var(--text-sec); font-size: 11px; font-weight: 800; text-transform: uppercase; letter-spacing: 1px; }
        .bets-scroll { padding: 0 16px 20px; display: flex; flex-direction: column; gap: 10px; height: calc(100vh - 480px); overflow-y: auto; }
        .player-row { 
            background: var(--card); padding: 14px; border-radius: 16px; 
            display: flex; justify-content: space-between; align-items: center;
            border: 1px solid rgba(255,255,255,0.02); animation: slideIn 0.4s ease-out;
        }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }

        .p-meta { display: flex; align-items: center; gap: 12px; }
        .p-avatar { 
            width: 40px; height: 40px; border-radius: 12px; background: #2b3139; 
            display: flex; align-items: center; justify-content: center; 
            font-weight: 800; border: 1px solid rgba(255,255,255,0.08); font-size: 14px;
        }
        .p-name { font-size: 15px; font-weight: 700; margin-bottom: 2px; }
        .p-bet-info { font-size: 12px; color: var(--text-sec); font-weight: 600; }

        .p-value { text-align: right; font-weight: 800; font-size: 17px; }
        .cash-ton { color: var(--green); }
        .cash-gift { 
            color: var(--gold); display: flex; align-items: center; gap: 8px; 
            animation: giftArrival 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }
        @keyframes giftArrival { from { transform: scale(0); rotate: -20deg; } to { transform: scale(1); rotate: 0; } }
        
        .gift-icon-img { width: 22px; height: 22px; }
    </style>
</head>
<body>

<div class="top-nav">
    <div class="stat-item"><div class="dot"></div> 124</div>
    <div class="balance-chip">üíé 0.12</div>
</div>

<div class="viewport">
    <div class="grid-system" id="stars-parallax"></div>
    <canvas id="render-layer"></canvas>
    <div id="multiplier-text">x1.00</div>
    <div id="rocket-node">
        <svg class="rocket-svg" viewBox="0 0 512 512">
            <path fill="#FFD15C" d="M352 160l-32-32-96 96 32 32z"/>
            <path fill="#F3705A" d="M128 448l64-64-96-96-64 64z"/>
            <circle fill="#4BB3FD" cx="320" cy="192" r="64"/>
            <path fill="#E6E9EE" d="M448 64c-64 0-192 64-256 128s-64 192-64 256c64 0 192-64 256-128s64-192 64-256z"/>
            <circle fill="#4BB3FD" cx="352" cy="160" r="32"/>
        </svg>
    </div>
</div>

<div class="panel">
    <button class="main-button" id="action-btn" onclick="onBtnClick()">–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É</button>
</div>

<div class="table-title">–ñ–∏–≤—ã–µ —Å—Ç–∞–≤–∫–∏</div>
<div class="bets-scroll" id="live-list"></div>

<script>
    // –ü–û–õ–ù–ê–Ø –ë–ê–ó–ê –ü–û–î–ê–†–ö–û–í
    const GIFT_DB = [
        { name: "Lol Pop", price: 3.23, icon: "üç≠" },
        { name: "Xmas Stocking", price: 3.22, icon: "üß¶" },
        { name: "Snake Box", price: 3.22, icon: "üì¶" },
        { name: "Snoop Cigar", price: 10.21, icon: "üö¨" },
        { name: "Snowman", price: 15.50, icon: "‚òÉÔ∏è" },
        { name: "Swiss Watch", price: 43.07, icon: "‚åö" },
        { name: "Diamond Ring", price: 605.00, icon: "üíç" }
    ];

    // –ë–û–¢–´ –ò–ó –í–ò–î–ï–û
    const BOT_DATA = [
        { name: "Forever Young", bet: 1.68, av: "FY" },
        { name: "–°–∞–Ω—è", bet: 0.49, av: "–°" },
        { name: "Pudzhik #sash", bet: 0.37, av: "P" },
        { name: "–û–±–º–µ–Ω–∏–∫ —Å $", bet: 0.14, av: "O" }
    ];

    let state = {
        running: false,
        multiplier: 1.0,
        crashPoint: 0,
        startTime: 0,
        loop: null
    };

    let canvas, ctx;

    function init() {
        canvas = document.getElementById('render-layer');
        canvas.width = window.innerWidth;
        canvas.height = 320;
        ctx = canvas.getContext('2d');
        renderBets(1.0);
    }

    function renderBets(mult) {
        const container = document.getElementById('live-list');
        container.innerHTML = BOT_DATA.map((bot, i) => {
            const currentVal = bot.bet * mult;
            // –ü–æ–∏—Å–∫ –ª—É—á—à–µ–≥–æ –ø–æ–¥–∞—Ä–∫–∞
            const gift = [...GIFT_DB].reverse().find(g => currentVal >= g.price);
            
            return `
                <div class="player-row">
                    <div class="p-meta">
                        <div class="p-avatar">${bot.av}</div>
                        <div>
                            <div class="p-name">${bot.name}</div>
                            <div class="p-bet-info">üíé ${bot.bet} x${mult.toFixed(2)}</div>
                        </div>
                    </div>
                    <div class="p-value ${gift ? 'cash-gift' : 'cash-ton'}" id="v-${i}">
                        ${gift ? `<span>${gift.icon}</span> <span>${gift.name}</span>` : currentVal.toFixed(2)}
                    </div>
                </div>
            `;
        }).join('');
    }

    function onBtnClick() {
        if (!state.running) startFlight();
        else finishFlight(false);
    }

    function startFlight() {
        state.running = true;
        state.multiplier = 1.0;
        state.crashPoint = generateCrashPoint();
        
        const btn = document.getElementById('action-btn');
        const rocket = document.getElementById('rocket-node');
        const mText = document.getElementById('multiplier-text');
        
        btn.innerText = "–ó–∞–±—Ä–∞—Ç—å";
        rocket.style.display = 'block';
        mText.style.color = 'white';

        state.loop = setInterval(() => {
            state.multiplier += state.multiplier * 0.012; // –°–∫–æ—Ä–æ—Å—Ç—å –∫–∞–∫ –≤ –≤–∏–¥–µ–æ
            
            mText.innerText = `x${state.multiplier.toFixed(2)}`;
            
            // –§–∏–∑–∏–∫–∞ —Ä–∞–∫–µ—Ç—ã
            const progress = state.multiplier - 1;
            const moveX = Math.min(progress * 70, canvas.width - 150);
            const moveY = Math.min(progress * 50, 200);
            
            rocket.style.transform = `translate(${moveX}px, -${moveY}px) rotate(${-Math.min(progress*5, 20)}deg)`;
            
            // –†–∏—Å—É–µ–º —Å–ª–µ–¥
            drawEngineTrail(moveX + 60, 270 - moveY);
            
            // –ü–∞—Ä–∞–ª–ª–∞–∫—Å —Ñ–æ–Ω–∞
            document.getElementById('stars-parallax').style.transform = `translate(${-moveX % 45}px, ${moveY % 45}px) rotate(-5deg)`;

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ —Å—Ç–∞–≤–æ–∫
            renderBets(state.multiplier);

            if (state.multiplier >= state.crashPoint) finishFlight(true);
        }, 60);
    }

    function drawEngineTrail(tx, ty) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.beginPath();
        ctx.strokeStyle = "#0ecb81";
        ctx.lineWidth = 6;
        ctx.lineCap = "round";
        ctx.moveTo(60, 270);
        ctx.quadraticCurveTo(tx / 2 + 30, 270, tx, ty);
        ctx.stroke();
    }

    function generateCrashPoint() {
        const r = Math.random();
        if (r < 0.05) return 1.0; // –ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∫—Ä–∞—à
        return (1 / (1 - r)).toFixed(2);
    }

    function finishFlight(isCrash) {
        clearInterval(state.loop);
        state.running = false;
        
        const btn = document.getElementById('action-btn');
        const mText = document.getElementById('multiplier-text');
        
        if (isCrash) {
            mText.style.color = "var(--danger)";
            document.getElementById('rocket-node').style.display = 'none';
        } else {
            alert("–í—ã–∏–≥—Ä—ã—à –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω!");
        }
        
        btn.innerText = "–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É";
    }

    window.onload = init;
</script>
</body>
</html>


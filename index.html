<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Crash Pro Ultra - Full Edition</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --bg: #0b0e11;
            --card: #1e2329;
            --accent: #0098ea;
            --success: #0ecb81;
            --danger: #f6465d;
            --gold: #f3ba2f;
        }

        body {
            background: var(--bg);
            color: white;
            font-family: 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            overflow: hidden;
            user-select: none;
        }

        /* –ò–°–¢–û–†–ò–Ø –°–¢–ê–í–û–ö */
        .history-bar {
            display: flex;
            gap: 8px;
            padding: 10px;
            overflow-x: auto;
            background: #161a1e;
            border-bottom: 1px solid #2b3139;
            height: 35px;
            align-items: center;
        }
        .hist-item {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            white-space: nowrap;
        }
        .low { background: rgba(246, 70, 93, 0.2); color: var(--danger); }
        .high { background: rgba(14, 203, 129, 0.2); color: var(--success); }

        /* –ò–ì–†–û–í–ê–Ø –ó–û–ù–ê */
        .game-area {
            position: relative;
            height: 40vh;
            background: radial-gradient(circle at 10% 90%, #161a1e 0%, #0b0e11 100%);
        }
        #multiplier {
            position: absolute;
            left: 50%;
            top: 40%;
            transform: translate(-50%, -50%);
            font-size: 55px;
            font-weight: 900;
            z-index: 10;
            text-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        /* –ü–û–î–ê–†–û–ö –ù–ê –ì–†–ê–§–ò–ö–ï */
        .gift-on-chart {
            position: absolute;
            background: var(--gold);
            color: black;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: bold;
            box-shadow: 0 0 15px var(--gold);
            cursor: pointer;
            z-index: 30;
            display: none;
            animation: pulse 1s infinite;
        }
        @keyframes pulse { 0% { scale: 1; } 50% { scale: 1.05; } 100% { scale: 1; } }

        /* –£–ü–†–ê–í–õ–ï–ù–ò–ï */
        .controls {
            padding: 15px;
            background: var(--card);
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            height: 100%;
        }
        .bet-input-wrap {
            display: flex;
            background: #2b3139;
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 10px;
        }
        input { background: none; border: none; color: white; width: 100%; font-size: 18px; outline: none; }
        .btn-main {
            width: 100%;
            padding: 18px;
            border-radius: 12px;
            border: none;
            font-size: 20px;
            font-weight: bold;
            background: var(--success);
            transition: 0.2s;
            cursor: pointer;
        }

        /* –ò–ù–í–ï–ù–¢–ê–†–¨ */
        .inventory-label { font-size: 12px; color: #9299a6; margin-top: 10px; }
        .inventory {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 10px 0;
        }
        .inv-item {
            background: #2b3139;
            padding: 8px 12px;
            border-radius: 10px;
            font-size: 11px;
            min-width: 90px;
            border: 1px solid #3e4651;
        }
    </style>
</head>
<body>

<div class="history-bar" id="historyBar"></div>

<div class="game-area">
    <div id="multiplier">x1.00</div>
    <div id="chart-gift" class="gift-on-chart" onclick="collectGift()">üéÅ –ó–ê–ë–†–ê–¢–¨</div>
    <canvas id="mainChart"></canvas>
</div>

<div class="controls">
    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
        <span>–ë–∞–ª–∞–Ω—Å: <b id="balance">1000.00</b> TON</span>
        <span style="color: var(--accent)"><i class="fas fa-wallet"></i> Wallet</span>
    </div>
    
    <div class="bet-input-wrap">
        <input type="number" id="betAmount" value="10.0">
        <span style="color: #9299a6">TON</span>
    </div>

    <button class="btn-main" id="actionBtn" onclick="handleAction()">–°–¢–ê–í–ö–ê</button>

    <div class="inventory-label">–ú–û–ò –ü–û–î–ê–†–ö–ò:</div>
    <div class="inventory" id="inventory"></div>
</div>

<script>
    // –ü–û–õ–ù–ê–Ø –ë–ê–ó–ê: 61 –ü–û–î–ê–†–û–ö (+10%)
    const giftDB = [
        {n: "Lunar Snake", p: 3.08}, {n: "Xmas Stocking", p: 3.22}, {n: "Snake Box", p: 3.22},
        {n: "Lol Pop", p: 3.23}, {n: "Whip Cupcake", p: 3.26}, {n: "Moon Pendant", p: 3.29},
        {n: "Mousse Cake", p: 3.61}, {n: "Tama Gadget", p: 3.63}, {n: "Pet Snake", p: 3.64},
        {n: "Pretty Posy", p: 3.72}, {n: "Spiced Wine", p: 3.73}, {n: "Money Pot", p: 3.76},
        {n: "Star Notepad", p: 3.91}, {n: "Stellar Rocket", p: 3.94}, {n: "Winter Wreath", p: 4.07},
        {n: "Party Sparkler", p: 4.40}, {n: "Restless Jar", p: 4.49}, {n: "Santa Hat", p: 4.62},
        {n: "Swag Bag", p: 4.62}, {n: "Witch Hat", p: 4.64}, {n: "Lush Bouquet", p: 4.80},
        {n: "Snow Mittens", p: 4.87}, {n: "Snow Globe", p: 5.05}, {n: "Light Sword", p: 5.24},
        {n: "Joyful Bundle", p: 5.56}, {n: "Jolly Chimp", p: 6.45}, {n: "Spring Basket", p: 6.60},
        {n: "Sakura Flower", p: 8.02}, {n: "Sleigh Bell", p: 8.36}, {n: "Love Candle", p: 9.44},
        {n: "Top Hat", p: 9.57}, {n: "Valentine Box", p: 9.90}, {n: "Sky Stilettos", p: 10.01},
        {n: "Snoop Cigar", p: 10.21}, {n: "Trapped Heart", p: 10.59}, {n: "UFC Strike", p: 12.27},
        {n: "Mad Pumpkin", p: 13.75}, {n: "Love Potion", p: 14.30}, {n: "Khabib's Papakha", p: 22.41},
        {n: "Voodoo Doll", p: 25.84}, {n: "Vintage Cigar", p: 30.42}, {n: "Neko Helmet", p: 31.75},
        {n: "Toy Bear", p: 31.79}, {n: "Signet Ring", p: 32.34}, {n: "Low Rider", p: 38.27},
        {n: "Sharp Tongue", p: 41.80}, {n: "Kissed Frog", p: 42.26}, {n: "Swiss Watch", p: 43.07},
        {n: "Magic Potion", p: 72.59}, {n: "Scared Cat", p: 79.20}, {n: "Perfume Bottle", p: 84.82},
        {n: "Mini Oscar", p: 87.96}, {n: "Loot Bag", p: 110.00}, {n: "Nail Bracelet", p: 119.79},
        {n: "Heroic Helmet", p: 261.80}, {n: "Precious Peach", p: 395.99}, {n: "Bonded Ring", p: 440.00},
        {n: "Diamond Ring", p: 605.00}, {n: "Durov‚Äôs Cap", p: 926.20}, {n: "Heart Locket", p: 1474.00},
        {n: "Plush Pepe", p: 6033.50}
    ];

    let chart, gameLoop, crashPoint, giftPoint, currentGift;
    let balance = 1000.0, currentX = 1.00, isPlaying = false;

    function initChart() {
        const ctx = document.getElementById('mainChart').getContext('2d');
        chart = new Chart(ctx, {
            type: 'line',
            data: { labels: [0], datasets: [{ data: [1], borderColor: '#0098ea', borderWidth: 3, fill: true, backgroundColor: 'rgba(0, 152, 234, 0.1)', pointRadius: 0, tension: 0.3 }] },
            options: { responsive: true, maintainAspectRatio: false, scales: { x: { display: false }, y: { display: false, min: 1, max: 8 } }, plugins: { legend: { display: false } }, animation: false }
        });
    }

    function handleAction() {
        if (!isPlaying) startGame();
        else cashOut();
    }

    function startGame() {
        const bet = parseFloat(document.getElementById('betAmount').value);
        if (balance < bet) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ TON");
        
        balance -= bet;
        updateUI();
        isPlaying = true;
        currentX = 1.00;
        crashPoint = (Math.random() * 6 + 1.1).toFixed(2);
        
        // –®–∞–Ω—Å –ø–æ–¥–∞—Ä–∫–∞
        giftPoint = (Math.random() * (crashPoint - 1.1) + 1.1).toFixed(2);
        currentGift = giftDB[Math.floor(Math.random() * giftDB.length)];

        const btn = document.getElementById('actionBtn');
        btn.innerText = "–ó–ê–ë–†–ê–¢–¨";
        btn.style.background = "var(--accent)";

        chart.data.labels = [0]; chart.data.datasets[0].data = [1];

        gameLoop = setInterval(() => {
            currentX += 0.02;
            document.getElementById('multiplier').innerText = `x${currentX.toFixed(2)}`;
            chart.data.labels.push("");
            chart.data.datasets[0].data.push(currentX);
            chart.update();

            if (currentX >= giftPoint && currentX < parseFloat(giftPoint) + 0.1) {
                const g = document.getElementById('chart-gift');
                g.style.display = 'block';
                g.style.left = '50%'; g.style.top = '30%';
                g.innerText = `üéÅ ${currentGift.n}`;
            }

            if (currentX >= crashPoint) finishGame(true);
        }, 100);
    }

    function collectGift() {
        const inv = document.getElementById('inventory');
        inv.innerHTML += `<div class="inv-item">üéÅ ${currentGift.n}<br><b>${currentGift.p} TON</b></div>`;
        document.getElementById('chart-gift').style.display = 'none';
        giftPoint = 999; // –£–±–∏—Ä–∞–µ–º, —á—Ç–æ–±—ã –Ω–µ –∫–ª–∏–∫–Ω—É—Ç—å –¥–≤–∞–∂–¥—ã
    }

    function cashOut() {
        const bet = parseFloat(document.getElementById('betAmount').value);
        balance += bet * currentX;
        finishGame(false);
    }

    function finishGame(isCrash) {
        clearInterval(gameLoop);
        isPlaying = false;
        document.getElementById('chart-gift').style.display = 'none';
        const btn = document.getElementById('actionBtn');
        
        if (isCrash) {
            document.getElementById('multiplier').innerText = "BOOM!";
            btn.style.background = "var(--danger)";
        } else {
            btn.style.background = "var(--success)";
        }

        const hist = document.getElementById('historyBar');
        hist.innerHTML = `<div class="hist-item ${currentX > 2 ? 'high' : 'low'}">${currentX.toFixed(2)}x</div>` + hist.innerHTML;

        setTimeout(() => {
            btn.innerText = "–°–¢–ê–í–ö–ê";
            btn.style.background = "var(--success)";
            updateUI();
        }, 2000);
    }

    function updateUI() {
        document.getElementById('balance').innerText = balance.toFixed(2);
    }

    initChart();
</script>
</body>
</html>


